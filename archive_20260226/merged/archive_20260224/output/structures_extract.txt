--- Page 1 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 1 of 145DoPE
Measuring and Controlling with DOLI Components
DOLI Elektronik GmbH  ß Fraunhoferstraße 23h ß D-80469 Munich/Germany ß http://www.doli.de
Tel:++49-89-20243-0  ß  Fax:++49-89-20243-243  ß  eMail:info@doli.deDoPE
Documentation
DoPE DLLApplication program
DPX safe proto

--- Page 2 | Keyword: DoPESetup ---
................. 38
4.1 DoPEOpenSetup(Sync) ......................................................................................................... ....38
4.2 DoPECloseSetup(Sync) ........................................................................................................ .....38
4.3 DoPESetupScale .............................................................................................................. ..........38
4.4 DoPERdSetupAll(Sync) ........................................................................................................ ....39
4.5 DoPEWrSetupAll(Sync)

--- Page 2 | Keyword: DoPE ---
Page 2 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
Contents
1 OVERVIEW ...................................................................................................................... .......................................... 7
1.1 Tasks of DoPE ...............................................................................

--- Page 2 | Keyword: DoPEOpenLink ---
............................ 31
3.8 Miscellaneous Control Commands............................................................................................33
3.9 Sensor EEPROM Handling ...................................................................................................... .34
3.10 DoPEOpenLink............................................................................................................... .......35
3.11 DoPECloseLink .............................................................................................................. .......35
3.12 DoPESetNotification .

--- Page 2 | Keyword: DoPESetNotification ---
........... .34
3.10 DoPEOpenLink............................................................................................................... .......35
3.11 DoPECloseLink .............................................................................................................. .......35
3.12 DoPESetNotification ........................................................................................................ .....36
3.13 DoPEInitialize............................................................................................................. ...........37
4 SETUP COMMANDS........

--- Page 3 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 3 of 145DoPE
4.17 DoPERdMachineDef ........................................................................................................... ..44
4.18 DoPEWrMachineDef(Sync) ..................................................................................................44
4.1

--- Page 3 | Keyword: DoPESelSetup ---
........................ ..45
4.21 DoPERdGeneralData .......................................................................................................... ...46
4.22 DoPEWrGeneralData(Sync)..................................................................................................46
4.23 DoPESelSetup............................................................................................................... .........47
4.24 DoPERdSensorInfo........................................................................................................... .....47
4.25 DoPERdSysUserData ....

--- Page 4 | Keyword: DoPE ---
Page 4 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
6.6.1 DoPEZeroCal(Sync) ......................................................................................................... ............................ 74
6.6.2 DoPECal(Sync)....................................................................................................

--- Page 5 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 5 of 145DoPE
8.4.1 DoPEPosG2(Sync)........................................................................................................... ........................... 104
8.4.2 DoPEPosG2_A(Sync) ..................................................................................

--- Page 5 | Keyword: record ---
......1 33
12.7 DoPERdSensorAbsData ......................................................................................................13 4
12.8 DoPEWrSensorAbsData......................................................................................................13 4
13 DEFAULT MEASURING DADA RECORD ................................................................................................ ....... 135
13.1 Logical input signals...................................................................................................... ......136
13.2 Logical output signals..................

--- Page 6 | Keyword: DoPE ---
Page 6 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
13.5 Definitions of EDC-front panel keys ...................................................................................140
14 DOPE ERROR CONSTANTS ......................................................................................................... ...................... 

--- Page 7 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 7 of 145DoPE
1 Overview
DOLI has a very powerful software for data acquisiti on and closed loop control for testing instruments
like tensile testers. This software runs on a hardware platform from DOLI like EDC5/25, EDC100,
EDC60, EDC120 and others. It is conf igurable within a w

--- Page 8 | Keyword: DoPE ---
Page 8 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
1.1 Tasks of DoPE
• DoPE will initialise the Subsystem according to predefined set-up data.
• DoPE gives the application program meas uring data in SI-units (N, m etc.)
• DoPE offers a wide range of machine control commands
Simple commands like:
„move Up in position control with 0

--- Page 9 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 9 of 145DoPE
1.3 Supported programming languages
DoPE is delivered as a DLL running under Windows  operating system. Each programming
language that supports the us e of DLL’s can be used fo r the application program.
However DOLI supplies only header files for “C”, “Delphi/Pasca

--- Page 9 | Keyword: DoPEOpenLink ---
on program.
However DOLI supplies only header files for “C”, “Delphi/Pascal” and Visual Basic.
Two DLL’s are needed to use DoPE: DoPE32.DLL and NTDPX.DLL.
1.3.1 Special considerations for VB-Programmer
• All DoPE function names use “DoPEVB” instead  of “DoPE”. For instance the name of the
function “DoPEOpenLink” is in Visual Basic “DoPEVBOpenLink”.
• Do not use the DoPE call-back mechanism while debugging VB program. Only use it for
executable versions. Microsoft’ s VB- developing system has obviously problems debugging call-
back mechanism.
• Use “DoPEVB32.DLL” additi onal to the “DoPE32.DLL”

--- Page 9 | Keyword: DoPESelSetup ---
ERROR)
{
// do error handling
}
// Here DoPEOpenLink was successful and communication to the EDC is online.
DoPEErr=DoPESetNotificatio n (DoPEHdl, DoPEEVT_ALL, NULL, hWnd, WM_DoPEEvent );
if(DoPEErr != DoPERR_NOERROR)
{
// do error handling
}
// Select one of the up to four possibile Setups
DoPEErr=DoPESelSetup ( DoPEHdl, 1, Us cale, &lpusTANFirst,  &lpusTANLast );
if(DoPEErr != DoPERR_NOERROR)
{
// do error handling
}
// Here the initialisation sequence for DoPE is done.
// Now you can move the machin e e.g. Up with 0.01 m/sec
DoPEErr = DoPEFMove (DoPEHdl, MOVE_UP, 0.01);
// Or you can positi

--- Page 10 | Keyword: DoPE ---
Page 10 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
1.4.3 „Delphi“ Program
uses
  DoPE;
const
 CM_CbMessage = WM_USER  // for DoPECallback
// Open Connection to the EDC
   DoPEErr := DoPEOpenLink(Port, Baud, 10, 10, 10, DoPEAPIVERSION, NIL, DoPEHdl);
   If (DoPEErr <> DoPEErr_NOERROR)
   begin
     do Error handling;
   end;
// Ope

--- Page 10 | Keyword: DoPEOpenLink ---
Page 10 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
1.4.3 „Delphi“ Program
uses
  DoPE;
const
 CM_CbMessage = WM_USER  // for DoPECallback
// Open Connection to the EDC
   DoPEErr := DoPEOpenLink(Port, Baud, 10, 10, 10, DoPEAPIVERSION, NIL, DoPEHdl);
   If (DoPEErr <> DoPEErr_NOERROR)
   begin
     do Error handling;
   end;
// OpenLink was successful; Communi cation to the EDC is online   
// SetNotification for DoPECallBack
   DoPEErr := DoPESetNotification(DoPEHdl, DoPEEVT_AL

--- Page 10 | Keyword: DoPESetNotification ---
en Connection to the EDC
   DoPEErr := DoPEOpenLink(Port, Baud, 10, 10, 10, DoPEAPIVERSION, NIL, DoPEHdl);
   If (DoPEErr <> DoPEErr_NOERROR)
   begin
     do Error handling;
   end;
// OpenLink was successful; Communi cation to the EDC is online   
// SetNotification for DoPECallBack
   DoPEErr := DoPESetNotification(DoPEHdl, DoPEEVT_ALL, DoPECallBack-Function, handle, CM_CbMessage);
   If (DoPEErr <> DoPEErr_NOERROR)
   begin
     do Error handling;
   end;
// Select one of the up to four possible Setups
   DoPEErr := DoPESelSetup(DoPEHdl , 1, UsScale, @TanFirst, @TanLast);
   If (DoPEErr <>

--- Page 10 | Keyword: DoPESelSetup ---
to the EDC is online   
// SetNotification for DoPECallBack
   DoPEErr := DoPESetNotification(DoPEHdl, DoPEEVT_ALL, DoPECallBack-Function, handle, CM_CbMessage);
   If (DoPEErr <> DoPEErr_NOERROR)
   begin
     do Error handling;
   end;
// Select one of the up to four possible Setups
   DoPEErr := DoPESelSetup(DoPEHdl , 1, UsScale, @TanFirst, @TanLast);
   If (DoPEErr <> DoPEErr_NOERROR)
   begin
     do Error handling;
   end;
// Now the initialisation sequence for DoPE is done and you can move the machine...
end;

--- Page 11 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 11 of 145DoPE
2 Communication Priciples
DoPE represents a library that a ddresses functions inside the remote  EDC-controller. Physically the
EDC is connected via a standard COM-Port with the PC. A safe serial protocol is used for
communications. This protocol, named DPX, det ect

--- Page 11 | Keyword: DoPEOpenLink ---
ects ON/OFF-line transitions, transmits messages
and measured data packets with ACK/NAC mechanism.
The user of DoPE must always be aware of th e remote controller and due to this a asynchronous
behaviour of DoPE.
2.1 Open a connection
The application program estab lishes a connection by calling the DoPEOpenLink  function. This
function creates a thread with a priority depending on the priori ty of the application thread.
If the application thread has the priority TH READ_PRIORITY_NORMAL, DoPE thread will use the
priority THREAD_PRIORITY_ABOVE_NORMAL.
If the application thread has the priority 

--- Page 11 | Keyword: DoPESetNotification ---
C might be dela yed. This will cause unpredictable problems.
By this mechanism it is safeguarded that DoPE and hence the communication with the EDC has
always a higher priority th an the application program.
2.2 Establishing a connection with call-back function
Application Thread
DoPEOpenConnection
DoPESetNotificationDoPE – Thread
Call-back-FunctionExchange of data
Call according to EvtMask
Parameter to Call-back  
NotifyWnd
NotifyMsg (ID)
DoPEHandle
EvtMaskParameter :  
DoPEHandle
EventMask
NotifyProc (Callback)
NotifyWnd (for Postmessage)
NotifyMsg (for Postmessage)create Thread
DoPE - Handl

--- Page 12 | Keyword: DoPE ---
Page 12 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
• NotifyProc Specifies the addre ss of the call-back function.
• NotifyWnd This parameter is not used by DoPE, it may be used to pass information between 
the application program and call-back.
• NotifyMsg This parameter is not used by DoPE, it may be used to pass information betw

--- Page 12 | Keyword: record ---
 between application
program and call-back.
The application programme should not call lengthy func tions like graphics, file handling etc. Due to
the high priority of the cal l-back function, only absolutely necessa ry tasks should be done inside the
call-back function.
Tasks like:
• Analysing data record and react on it by sending command to the EDC.
• Copy the data record to a circul ar buffer. (The application thr ead reads this data for further
analysis, update the online graphic etc.)
may be done inside the call-back function.
2.3 Establishing a connection using Windows message passing
Al

--- Page 12 | Keyword: DoPEOpenLink ---
.)
may be done inside the call-back function.
2.3 Establishing a connection using Windows message passing
Alternatively to the above cal l-back mechanism, a simple message passing may be used to
communicate from DoPE with the application prog ram. After the connection was successfully opened
by the DoPEOpenLink command, the communication between DoPE and the application program has
to be established by DoPESetNotification  command. Here are the parameters for
DoPESetNotification if a Windows message pa ssing mechanism is used for communications:
• EventMask specifies events that causes a messa

--- Page 12 | Keyword: DoPESetNotification ---
Alternatively to the above cal l-back mechanism, a simple message passing may be used to
communicate from DoPE with the application prog ram. After the connection was successfully opened
by the DoPEOpenLink command, the communication between DoPE and the application program has
to be established by DoPESetNotification  command. Here are the parameters for
DoPESetNotification if a Windows message pa ssing mechanism is used for communications:
• EventMask specifies events that causes a message to be send.
• NotifyProc NULL
• NotifyWnd the window handle of the application program window
• NotifyM

--- Page 13 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 13 of 145DoPE
2.4 Transaction Number
Some of the following commands have pointers to a transaction number (lpusTAN) as a parameter.
This TAN may be used to identify messages, which are received asynchronously, to the command.
Example: A positioning command is send to the EDC. Aft

--- Page 13 | Keyword: DoPESetNotification ---
hronous and asynchronous commands.
Synchronous commands wait until the EDC has check ed the parameter and returned the result.
Asynchronous commands are just transmitted to the EDC and return to the caller immediately. The
result of parameter check inside the EDC is tr ansmitted later if enabled by DoPESetNotification
command.
In both cases positioning commands will report completion of the command after destination positionis reached.

--- Page 14 | Keyword: DoPE ---
Page 14 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
2.6 Messages from DoPE to the application program
Besides measured values, messages are send from the EDC via DoPE to the application program.
If enabled by DoPESetNotification, a incoming message will create a DoPEEVT_RXAVAIL event
which is send to the application program via cal

--- Page 14 | Keyword: DoPESetNotification ---
Page 14 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
2.6 Messages from DoPE to the application program
Besides measured values, messages are send from the EDC via DoPE to the application program.
If enabled by DoPESetNotification, a incoming message will create a DoPEEVT_RXAVAIL event
which is send to the application program via call-back or PostMessage mechanism. 
In both cases the real message must be read by DoPEGetMsg function.
There are three major types of messages possible: 
1. COMMAND_ERROR
This m

--- Page 15 | Keyword: DoPESetup ---
(@1113) DoPEHdl DoPE Handle
SetupNo Number of Set-up
not required for Sync version lpusTAN Pointer to memory for Transaction Number
DoPECloseSetup(Sync) 38 Close previously opened Set-up
@114  (@1114) DoPEHdl DoPE Handle
not required for Sync version lpusTAN Pointer to memory for Transaction Number
DoPESetupScale 38 Define User scale for Set-up sensor data
@148 DoPEHdl DoPE Handle
SetupNo Number of Set-up
US User scale for all set-up sensor data (except DoPESenDef)
DoPERdSetupAll (Sync) 39 Read total Set-up data of opened Set-up
@111  (@1111) DoPEHdl DoPE Handle
SetupNo Number of Set-up
DoPESe

--- Page 15 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 15 of 145DoPE
3 Overview of all DoPE Commands
3.1 Initialisation Commands
Command
DLL-Ordination No.Page Parameter Name
DoPEOpenLink 15 Establish Communication to a EDC
@8 Port Communication Port No.
BaudRate Baudrate for communication
RcvBuffers Number of buffers for received me

--- Page 15 | Keyword: record ---
nation No.Page Parameter Name
DoPEOpenLink 15 Establish Communication to a EDC
@8 Port Communication Port No.
BaudRate Baudrate for communication
RcvBuffers Number of buffers for received messages
XmitBuffers Number of buffers for messages to transmit
DataBuffers Number of buffers for received data records
APIVersion Version of application interface
Reserved Reserved parameter
DoPEHdl DoPE Handle
DoPECloseLink 35 Close Communication with a EDC
@9 DoPEHdl DoPE Handle
DoPESetNotification 36 Set Notification parameter
@12 DoPEHdl DoPE Handle
EventMask Mask of events that  cause a notification
Not

--- Page 15 | Keyword: DoPEOpenLink ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 15 of 145DoPE
3 Overview of all DoPE Commands
3.1 Initialisation Commands
Command
DLL-Ordination No.Page Parameter Name
DoPEOpenLink 15 Establish Communication to a EDC
@8 Port Communication Port No.
BaudRate Baudrate for communication
RcvBuffers Number of buffers for received messages
XmitBuffers Number of buffers for messages to transmit
DataBuffers Number of buffers for received data records
APIVersion Version of 

--- Page 15 | Keyword: DoPESetNotification ---
ers for received messages
XmitBuffers Number of buffers for messages to transmit
DataBuffers Number of buffers for received data records
APIVersion Version of application interface
Reserved Reserved parameter
DoPEHdl DoPE Handle
DoPECloseLink 35 Close Communication with a EDC
@9 DoPEHdl DoPE Handle
DoPESetNotification 36 Set Notification parameter
@12 DoPEHdl DoPE Handle
EventMask Mask of events that  cause a notification
NotifyProc Address of Call-back function or NULL
NotifyWnd Window Handle of application program
NotifyMsg ID for message passed from DoPE to application
DoPEInitialize 37 Ini

--- Page 16 | Keyword: DoPESetup ---
Page 16 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
Command
DLL-Ordination No.Page Parameter Name
DoPEWrSetupAll (Sync) 39 Write total set-up
@112  (@1112) DoPEHdl DoPE Handle
SetupNo Number of Set-up
DoPESetup Pointer to memory with Set-up data
not required for Sync version lpusTANFirst Pointer to memory for first Transaction Number
not required for Sync version lpusTANLast Pointer to memory for last Transaction Number
DoPERdSetupNumber 40 Read active set-up number
@110 DoPEHdl DoPE Handle
Setup

--- Page 16 | Keyword: DoPE ---
Page 16 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
Command
DLL-Ordination No.Page Parameter Name
DoPEWrSetupAll (Sync) 39 Write total set-up
@112  (@1112) DoPEHdl DoPE Handle
SetupNo Number of Set-up
DoPESetup Pointer to memory with Set-up data
not required for Sync version lpusTANFirst Pointer to memory for first Transaction Numb

--- Page 17 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 17 of 145DoPE
Command
DLL-Ordination No.Page Parameter Name
DoPERdBitOutDef 43 Read definition data of Bit output channel
@95 DoPEHdl DoPE Handle
BitOutNo Number of Bit input channel
BitOutDef Pointer to memory for Bit output channel definition data
DoPEWrBitOutDef (Sync) 43 Writ

--- Page 17 | Keyword: DoPESelSetup ---
6 Read general data
@100 DoPEHdl DoPE Handle
GeneralData Pointer to memory for general data
DoPEWrGeneralData (Sync) 46 Write general data
@109  (@1109) DoPEHdl DoPE Handle
GeneralData Pointer to memory with general data
not required for Sync version lpusTAN Pointer to memory for Transaction Number
DoPESelSetup 47 Select machine Set-up
@13 DoPEHdl DoPE Handle
SetupNo Machine Set-up number
US User scale for all measuring channels
lpusTANFirst Pointer to memory for first Transaction Number
lpusTANLast Pointer to memory for last Transaction Number
DoPERdSensorInfo 47 Read Sensor information
@91 D

--- Page 18 | Keyword: DoPE ---
Page 18 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
Command
DLL-Ordination No.Page Parameter Name
DoPEWrSysUserData (Sync) 48 Write system user data
@108  (@1108) DoPEHdl DoPE Handle
SysUsrData Pointer to memory for system user data
Length Length of system user data in bytes
not required for Sync version lpusTAN Pointer to memory f

--- Page 18 | Keyword: record ---
ser data in bytes
not required for Sync version lpusTAN Pointer to memory for Transaction Number
DoPEGetMsg 51 Get message from receive buffer
@18 DoPEHdl DoPE Handle
Buffer Pointer to memory for the message
BufSize Length of Buffer in bytes
Length Length of received message
DoPEGetData 57 Get data record
@19 DoPEHdl DoPE Handle
Buffer Pointer to memory for data record
DoPECurrentData 58 Get current data record
@146 DoPEHdl DoPE Handle
Buffer Pointer to memory for data record
DoPEClearReceiver 57 Clear (discard) all received messages
@20 DoPEHdl DoPE Handle

--- Page 19 | Keyword: DoPEData ---
Intgr (Sync) 61 Set Integration time for an analogue sensor
@30  (@1030) DoPEHdl DoPE Handle
SensorNo Sensor number
Intgr Integration time for the sensor
not required for Sync version lpusTAN Pointer to memory for Transaction Number
DoPECtrlTestValues 62 Enable/Disable controller test values in the DoPEData record
@180 DoPEHdl DoPE Handle
State TRUE   = EnableFALSE = Disable
controller test values in the DoPEData record

--- Page 19 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 19 of 145DoPE
Command
DLL-Ordination No.Page Parameter Name
DoPEClearTransmitter 58 Clear (discard) all messages to be sent
@21 DoPEHdl DoPE Handle
DoPEGetState 58 Read DoPE state (Co mmunication state, Nu mber of received messages,
Number of messages to be transmitted)
@16 DoPEH

--- Page 19 | Keyword: record ---
nation No.Page Parameter Name
DoPEClearTransmitter 58 Clear (discard) all messages to be sent
@21 DoPEHdl DoPE Handle
DoPEGetState 58 Read DoPE state (Co mmunication state, Nu mber of received messages,
Number of messages to be transmitted)
@16 DoPEHdl DoPE Handle
Status Pointer to memory for state record
DoPEGetErrors 59 Read current error counter values
@15 DoPEHdl DoPE Handle
Error Pointer to memory for error record
3.4 Configuration Commands
Command
DLL-Ordination No.Page Parameter Name
DoPERdVersion 60 Read Version strings
@80 DoPEHdl DoPE Handle
Version Pointer to memory for Version stri

--- Page 20 | Keyword: DoPE ---
Page 20 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
Command
DLL-Ordination No.Page Parameter Name
DoPEShieldLimit (Sync) 65 Activate safety shield (screen)
@127  (@1127) DoPEHdl DoPE Handle
SensorNo Sensor number (normally load)
UprLock Above this value shield must be closed
UprUnLock Below this value shield is unlocked
LwrUnLock A

--- Page 21 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 21 of 145DoPE
Command
DLL-Ordination No.Page Parameter Name
DoPEPosPID (Sync) 69 Set parameter for closed loop position  controller
@176  (@1176) DoPEHdl DoPE Handle
MoveCtrl Control mode (CTRL_POS, CTRL_LOA D, CTRL_EXTENSION)
P Proportional gain of the position controller
I Inte

--- Page 22 | Keyword: DoPE ---
Page 22 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
Command
DLL-Ordination No.Page Parameter Name
DoPECal (Sync) 74 Calibrate (offset and gain) analogue measuring channel(s)
@31  (@1031) DoPEHdl DoPE Handle
SensorBits Bit 0 = 1 Calibrate Sensor 0  and so on
not required for Sync version lpusTAN Pointer to memory for Transaction Num

--- Page 22 | Keyword: record ---
t tare of the measuring channel
@26 DoPEHdl DoPE Handle
SensorNo Sensor Number
Tare Tare value
DoPEGetTare 77 Read tare of the measuring channel
@28 DoPEHdl DoPE Handle
SensorNo Sensor Number
Tare Pointer to memory for tare value
DoPEConfPeakValue  (Sync) 82 Configure peak values to  measuring data record.
@131  (@1131) DoPEHdl DoPE Handle
PositionMin Position of Minimum value of XHead Position
PositionMax Position of Maximum value of XHead Position
LoadMin Position of Minimum value of Load
LoadMax Position of Maximum value of Load
ExtensionMin Position of Minimum value of Extension
ExtensionM

--- Page 23 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 23 of 145DoPE
Command
DLL-Ordination No.Page Parameter Name
DoPEConfCMcCommandSpeed (Sync) 79 Configure calculated speed of command output to data record.
@136  (@1136) DoPEHdl DoPE Handle
CalculatedSensorNo Position in measuring data record  for the calculated command speed
Time

--- Page 23 | Keyword: record ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 23 of 145DoPE
Command
DLL-Ordination No.Page Parameter Name
DoPEConfCMcCommandSpeed (Sync) 79 Configure calculated speed of command output to data record.
@136  (@1136) DoPEHdl DoPE Handle
CalculatedSensorNo Position in measuring data record  for the calculated command speed
Timebase Time base for speed calculation (maximum 2.56 sec.)
not required for Sync version lpusTANFirst Pointer to memory for first Transaction Number
not required for Syn

--- Page 24 | Keyword: DoPE ---
Page 24 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
3.5 Input / Output-Commands
Command
DLL-Ordination No.Page Parameter Name
DoPESetOutput (Sync) 85 Set an analogue output channel
@33  (@1033) DoPEHdl DoPE Handle
Output Output channel number
Value New value of output channel in % of max. value
not required for Sync version lpusTAN

--- Page 25 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 25 of 145DoPE
Command
DLL-Ordination No.Page Parameter Name
DoPERdBitInput 89 Directly read digital input device
@115 DoPEHdl DoPE Handle
Connector Connector Number
Value Pointer to memory for digital input value
DoPEWrBitOutput (Sync) 89 Directly write digital output device
@116

--- Page 26 | Keyword: DoPE ---
Page 26 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
3.6 Movement commands
Command
DLL-Ordination No.Page Parameter Name
DoPEHalt (Sync) 94 Halt movement of cross-head in the specified control mode
@46  (@1046) DoPEHdl DoPE Handle
MoveCtrl Control mode (CTRL_POS, CTRL_LOA D, CTRL_EXTENSION)
lpusTAN Pointer to memory for Transaction 

--- Page 27 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 27 of 145DoPE
Command
DLL-Ordination No.Page Parameter Name
DoPEPosG1  (Sync) 99 Move cross-head in the specified control mode and speed to the given destination.
Do not change control mode. Destination must be different to move control mode!
@57  (@1057) DoPEHdl DoPE Handle
Move

--- Page 28 | Keyword: DoPE ---
Page 28 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
Command
DLL-Ordination No.Page Parameter Name
DoPEPosG2  (Sync) 103 Move cross-head in the specified control mode and speed to the given destination.
Change control mode. Destination must be different to move control mode!
@61  (@1061) DoPEHdl DoPE Handle
MoveCtrl Control mode (CT

--- Page 29 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 29 of 145DoPE
Command
DLL-Ordination No.Page Parameter Name
DoPEPosExt  (Sync) 108 General positioning command to a external destination.
Use this command instead of DoPEPosG1, DoPEPosD 1, DoPEPosG2 and
DoPEPosD2.
This command is not available for EDC5/20 and EDC100!!!
@149  (@11

--- Page 30 | Keyword: DoPE ---
Page 30 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
Command
DLL-Ordination No.Page Parameter Name
DoPEFMove (Sync) 107 Move cross-head in the specified control mode and speed UP or DOWN
@45  (@1045) DoPEHdl DoPE Handle
Direction MOVE_HALT, MOVE_UP or MOVE_DOWN
MoveCtrl Control mode (CTRL_POS, CTRL_LOA D, CTRL_EXTENSION)
Speed Maxim

--- Page 31 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 31 of 145DoPE
3.7 Complex moving commands
Command
DLL-Ordination No.Page Parameter Name
DoPEExt2Ctrl (Sync) 114 Move cross-head according to an external command signal.
@43  (@1043) DoPEHdl DoPE Handle
MoveCtrl Control mode (CTRL_POS, CTRL_LOA D, CTRL_EXTENSION)
OffsetCtrl Offset

--- Page 32 | Keyword: DoPE ---
Page 32 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
Command
DLL-Ordination No.Page Parameter Name
DoPECosineX (Sync) 118 Cosine movement with halt time at Destination 1 and 2
@117  (@1117) DoPEHdl DoPE Handle
MoveCtrl Control mode (CTRL_POS, CTRL_LOA D, CTRL_EXTENSION)
Speed1 Maximum speed to reach destination 1
Dest1 Destination 1

--- Page 33 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 33 of 145DoPE
3.8 Miscellaneous Control Commands
Command
DLL-Ordination No.Page Parameter Name
DoPEOn (Sync) 125 Activate drive (only for EDC5/25 and new EDC60/120)
@81  (@1081) DoPEHdl DoPE Handle
not required for Sync version lpusTAN Pointer to memory for Transaction Number
DoP

--- Page 33 | Keyword: structure ---
y for Transaction Number
DoPEEmergencyOff (Sync) 126 Activate / deactivate  EmergencyOff state.
@53  (@1053) DoPEHdl DoPE Handle
State TRUE: On
FALSE: OFF
not required for Sync version lpusTAN Pointer to memory for Transaction Number
DoPESetOpenLoopCommand (Sync) 127 Set command output in open loop structure
@133  (@1133) DoPEHdl DoPE Handle
Command Command value in % of nominal output value
not required for Sync version lpusTAN Pointer to memory for Transaction Number
DoPESynchronizeSystemMode  (Sync) 123 Set mode for synchronized movements. (only EDC60/120)
@157 (@1157) DoPEHdl DoPE Handle
M

--- Page 33 | Keyword: struct ---
y for Transaction Number
DoPEEmergencyOff (Sync) 126 Activate / deactivate  EmergencyOff state.
@53  (@1053) DoPEHdl DoPE Handle
State TRUE: On
FALSE: OFF
not required for Sync version lpusTAN Pointer to memory for Transaction Number
DoPESetOpenLoopCommand (Sync) 127 Set command output in open loop structure
@133  (@1133) DoPEHdl DoPE Handle
Command Command value in % of nominal output value
not required for Sync version lpusTAN Pointer to memory for Transaction Number
DoPESynchronizeSystemMode  (Sync) 123 Set mode for synchronized movements. (only EDC60/120)
@157 (@1157) DoPEHdl DoPE Handle
M

--- Page 34 | Keyword: DoPE ---
Page 34 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
3.9 Sensor EEPROM Handling
Command
DLL-Ordination No.Page Parameter Name
DoPERdSensorConKey 128 Read sensor plug connected and key state.
@170 DoPEHdl DoPE Handle
Connector Connector number of sensor
*Connected Pointer to the sensor plug connected state(0=not connected, 1=connecte

--- Page 34 | Keyword: structure ---
the sensor plug connected state(0=not connected, 1=connected)
*KeyPressed Pointer to the sensor plug key state(0=not pressed, 1=pressed)
DoPERdSensorHeaderData 129 Read sensor EEPROM data header.
@160 DoPEHdl DoPE Handle
Connector Connector number of sensor
*SenHdrData Pointer to sensor data header structure
DoPERdSensorAnalogueData 130 Read analogue sensor data.
@162 DoPEHdl DoPE Handle
Connector Connector number of sensor
*SenAnalogueData Pointer to analogue sensor data structure
DoPEWrSensorAnalogueData 130 Write analogue sensor data.
@163 DoPEHdl DoPE Handle
Connector Connector number of s

--- Page 34 | Keyword: struct ---
the sensor plug connected state(0=not connected, 1=connected)
*KeyPressed Pointer to the sensor plug key state(0=not pressed, 1=pressed)
DoPERdSensorHeaderData 129 Read sensor EEPROM data header.
@160 DoPEHdl DoPE Handle
Connector Connector number of sensor
*SenHdrData Pointer to sensor data header structure
DoPERdSensorAnalogueData 130 Read analogue sensor data.
@162 DoPEHdl DoPE Handle
Connector Connector number of sensor
*SenAnalogueData Pointer to analogue sensor data structure
DoPEWrSensorAnalogueData 130 Write analogue sensor data.
@163 DoPEHdl DoPE Handle
Connector Connector number of s

--- Page 35 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 35 of 145DoPE
3.10 DoPEOpenLink
unsigned Port
unsigned BaudRate
unsigned RcvBuffers
unsigned XmitBuffers
unsigned DataBuffers
unsigned APIVersion
void FAR *Reserved
DoPE_HANDLE FAR *DoPEHdl
This must be the first call to start communications with DoPE.
All needed memory is alloca

--- Page 35 | Keyword: record ---
tored inside DoPE until
they are read with DoPEGetMsg function.
XmitBuffers Number of requested transmitter buffers for messages.
This number of transmit messages can be stored inside DoPE.
They will be transmitted by DoPE to the EDC.
DataBuffers Number of requested data buffers.
The measuring data record will be stored inside DoPE in acircular buffer. If data are not read with DoPEGetData the
oldest record be overwritten!
APIVersion Version number of app lication program interface (API).
Use DoPEAPIVERSION defined in dope.h.
Reserved Reserved parameter.
DoPEHdl Pointer to memory for DoPE link

--- Page 35 | Keyword: DoPEOpenLink ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 35 of 145DoPE
3.10 DoPEOpenLink
unsigned Port
unsigned BaudRate
unsigned RcvBuffers
unsigned XmitBuffers
unsigned DataBuffers
unsigned APIVersion
void FAR *Reserved
DoPE_HANDLE FAR *DoPEHdl
This must be the first call to start communications with DoPE.
All needed memory is allocated, link parame ters are set and the l

--- Page 36 | Keyword: DoPE ---
Page 36 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
3.12 DoPESetNotification
DoPE_HANDLE DoPEHdl
unsigned EventMask
NPROC *NotifyProc
HWND NotifyWnd
UINT NotifyMsg
Select the events you are interested in. 
There are two mechanism to notify your program if events occur:
1. Call-back mechanism
The parameter NotifyProc contains the ad

--- Page 36 | Keyword: DoPESetNotification ---
Page 36 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
3.12 DoPESetNotification
DoPE_HANDLE DoPEHdl
unsigned EventMask
NPROC *NotifyProc
HWND NotifyWnd
UINT NotifyMsg
Select the events you are interested in. 
There are two mechanism to notify your program if events occur:
1. Call-back mechanism
The parameter NotifyProc contains the address of the user call-b

--- Page 37 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 37 of 145DoPE
Possible events for EventMask:
Event Description Action
DoPEEVT_RXAVAIL New message received. Read message by DoPEGetMsg
DoPEEVT_DATAVAIL New measured data
record available.Read data by DoPEGetData
DoPEEVT_DATAOVERFLOW Overflow of data record.The oldest record wasov

--- Page 37 | Keyword: record ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 37 of 145DoPE
Possible events for EventMask:
Event Description Action
DoPEEVT_RXAVAIL New message received. Read message by DoPEGetMsg
DoPEEVT_DATAVAIL New measured data
record available.Read data by DoPEGetData
DoPEEVT_DATAOVERFLOW Overflow of data record.The oldest record wasoverwritten. Read all old data by repetitivelycalling DoPEGetData until nomore data are available.
DoPEEVT_ACK For all commands sent tothe EDC this event isgenerated after the EDChas checked t

--- Page 38 | Keyword: DoPESetup ---
rns: Error constant (DoPERR_xxxx)
4.2 DoPECloseSetup(Sync)
DoPE_HANDLE DoPEHdl
WORD FAR                            *lpusTAN          (not for Sync. version)
Closes previously opened set-up.
In: DoPEHdl DoPE link handle
lpusTAN Pointer to transaction number.
Returns: Error constant (DoPERR_xxxx)
4.3 DoPESetupScale
DoPE_HANDLE DoPEHdl
unsigned short SetupNo
UserScale US
Sets the set-up user scale.
In: DoPEHdl DoPE link handle
SetupNo Set-up Number
US User scale for all set-up sensor data (except DoPESenDef). 
The sensor data will be multiplied with the value in US. 
e.g. use this to convert the 

--- Page 38 | Keyword: DoPE ---
Page 38 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
4 Setup Commands
You can read or write machine set-up data. Ther e are maximal four plus one machine set-up’s
possible. Set-up data from number one to four are stored inside EDC in a EEPROM. Set-up number
zero is the working set-up. All data written to set-up zero are not stored, 

--- Page 39 | Keyword: DoPESetup ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 39 of 145DoPE
4.4 DoPERdSetupAll(Sync)
DoPERdSetupAll(Sync)
DoPE_HANDLE DoPEHdl
unsigned short SetupNo
DoPESetup FAR *Setup
WORD FAR                            * lpusTANFirst      (not for Sync. version)
WORD FAR                            * lpusTANLast       (not for Sync. version)
Read the total set-up structure.
In: DoPEHdl DoPE link handle
SetupNo Set-up Number
DoPESetup FAR Pointer to set-up dat

--- Page 39 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 39 of 145DoPE
4.4 DoPERdSetupAll(Sync)
DoPERdSetupAll(Sync)
DoPE_HANDLE DoPEHdl
unsigned short SetupNo
DoPESetup FAR *Setup
WORD FAR                            * lpusTANFirst      (not for Sync. version)
WORD FAR                            * lpusTANLast       (not for Sync. versi

--- Page 39 | Keyword: structure ---
145DoPE
4.4 DoPERdSetupAll(Sync)
DoPERdSetupAll(Sync)
DoPE_HANDLE DoPEHdl
unsigned short SetupNo
DoPESetup FAR *Setup
WORD FAR                            * lpusTANFirst      (not for Sync. version)
WORD FAR                            * lpusTANLast       (not for Sync. version)
Read the total set-up structure.
In: DoPEHdl DoPE link handle
SetupNo Set-up Number
DoPESetup FAR Pointer to set-up data
lpusTANFirst Pointer to first transaction number.
lpusTANLast Pointer to last transaction number.
Returns: Error constant (DoPERR_xxxx)
4.5 DoPEWrSetupAll(Sync)
DoPE_HANDLE DoPEHdl
unsigned short Setup

--- Page 39 | Keyword: struct ---
145DoPE
4.4 DoPERdSetupAll(Sync)
DoPERdSetupAll(Sync)
DoPE_HANDLE DoPEHdl
unsigned short SetupNo
DoPESetup FAR *Setup
WORD FAR                            * lpusTANFirst      (not for Sync. version)
WORD FAR                            * lpusTANLast       (not for Sync. version)
Read the total set-up structure.
In: DoPEHdl DoPE link handle
SetupNo Set-up Number
DoPESetup FAR Pointer to set-up data
lpusTANFirst Pointer to first transaction number.
lpusTANLast Pointer to last transaction number.
Returns: Error constant (DoPERR_xxxx)
4.5 DoPEWrSetupAll(Sync)
DoPE_HANDLE DoPEHdl
unsigned short Setup

--- Page 39 | Keyword: typedef ---
   (not for Sync. version)
Write the set-up structure.
In: DoPEHdl DoPE link handle
SetupNo Set-up Number
DoPESetup FAR Pointer to set-up data
lpusTANFirst Pointer to first transaction number.
lpusTANLast Pointer to last transaction number.
Returns: Error constant (DoPERR_xxxx)
DoPESetup structure:
typedef struct                         /* EDC Setup Data                    */
  {                                    /* ---------------------------------- */
  DoPESenDef      SDef[MAX_MC];        /* Sensor definition data             */
  DoPECtrlSenDef  CSDef[MAX_CTRL];     /* Control-Sensor defi

--- Page 40 | Keyword: DoPE ---
Page 40 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
4.6 DoPERdSetupNumber
DoPE_HANDLE DoPEHdl
unsigned short *SetupNo
Read currently selected set-up number.
In: DoPEHdl DoPE link handle
SetupNo Pointer to store set-up number
Returns: Error constant (DoPERR_xxxx)
4.7 DoPERdSensorDef
DoPE_HANDLE DP
unsigned short SensorNo
DoPESenDef 

--- Page 40 | Keyword: structure ---
nk handle
SetupNo Pointer to store set-up number
Returns: Error constant (DoPERR_xxxx)
4.7 DoPERdSensorDef
DoPE_HANDLE DP
unsigned short SensorNo
DoPESenDef FAR *SensorDef
Read sensor definitions of opened set-up.
In: DoPEHdl DoPE link handle
SensorNo Sensor Number
*SensorDef Pointer for DoPESenDef structure
Returns: Error constant (DoPERR_xxxx)
4.8 DoPEWrSensorDef(Sync)
DoPE_HANDLE DP
Unsigned short SensorNo
DoPESenDef  FAR *SensorDef
WORD FAR                            *lpusTAN          (not for Sync. version)
Write Sensor definitions to opened set-up.
In: DoPEHdl DoPE link handle
SensorNo S

--- Page 40 | Keyword: struct ---
nk handle
SetupNo Pointer to store set-up number
Returns: Error constant (DoPERR_xxxx)
4.7 DoPERdSensorDef
DoPE_HANDLE DP
unsigned short SensorNo
DoPESenDef FAR *SensorDef
Read sensor definitions of opened set-up.
In: DoPEHdl DoPE link handle
SensorNo Sensor Number
*SensorDef Pointer for DoPESenDef structure
Returns: Error constant (DoPERR_xxxx)
4.8 DoPEWrSensorDef(Sync)
DoPE_HANDLE DP
Unsigned short SensorNo
DoPESenDef  FAR *SensorDef
WORD FAR                            *lpusTAN          (not for Sync. version)
Write Sensor definitions to opened set-up.
In: DoPEHdl DoPE link handle
SensorNo S

--- Page 40 | Keyword: typedef ---
              *lpusTAN          (not for Sync. version)
Write Sensor definitions to opened set-up.
In: DoPEHdl DoPE link handle
SensorNo Sensor Number
*SensorDef Pointer for Sensor Definition structure
lpusTAN Pointer to Transaction-Number
Returns: Error constant (DoPERR_xxxx)
DoPESenDef structure:
typedef struct                         /* Sensor definition data             */
  {                                    /* ---------------------------------- */
  WORD   Connector;                    /* Connector number of sensor     [No]*/
  WORD   Sign;                         /* Invert sign of sen

--- Page 41 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 41 of 145DoPE
                                       /* Only for incremental sensors:      */
  double Scale;                        /* Scale of sensor    [inc/revolution]*/
                                       /*                or [Unit/revolution]*/
  double Correction;      

--- Page 41 | Keyword: structure ---
    /* Correction value of sensor     [No]*/
  } DoPESenDef;
4.9 DoPERdCtrlSensorDef
DoPE_HANDLE DP
unsigned short SensorNo
DoPECtrlSenDef FAR *CtrlSensorDef
Read definitions of control sensor of opened set-up.
In: DP DoPE link handle
SensorNo Sensor Number
*CtrlSensorDef Pointer for DoPECtrlSenDef structure
Returns: Error constant (DoPERR_xxxx)
4.10 DoPEWrCtrlSensorDef(Sync)
DoPE_HANDLE DP
Unsigned short SensorNo
DoPECtrlSenDef  FAR *CtrlSensorDef
WORD FAR                            *lpusTAN          (not for Sync. version)
Write control sensor definitions to opened set-up.
In: DoPEHdl DoPE l

--- Page 41 | Keyword: struct ---
    /* Correction value of sensor     [No]*/
  } DoPESenDef;
4.9 DoPERdCtrlSensorDef
DoPE_HANDLE DP
unsigned short SensorNo
DoPECtrlSenDef FAR *CtrlSensorDef
Read definitions of control sensor of opened set-up.
In: DP DoPE link handle
SensorNo Sensor Number
*CtrlSensorDef Pointer for DoPECtrlSenDef structure
Returns: Error constant (DoPERR_xxxx)
4.10 DoPEWrCtrlSensorDef(Sync)
DoPE_HANDLE DP
Unsigned short SensorNo
DoPECtrlSenDef  FAR *CtrlSensorDef
WORD FAR                            *lpusTAN          (not for Sync. version)
Write control sensor definitions to opened set-up.
In: DoPEHdl DoPE l

--- Page 41 | Keyword: typedef ---
        (not for Sync. version)
Write control sensor definitions to opened set-up.
In: DoPEHdl DoPE link handle
SensorNo Sensor Number
*CtrlSensorDef Pointer for Control-Sensor Definition structure
lpusTAN Pointer to Transaction-Number
Returns: Error constant (DoPERR_xxxx)
DoPECtrlSenDef structure:
typedef struct                         /* Control Sensor definition data     */
  {                                    /* ---------------------------------- */
  double Acceleration;                 /* Nominal acceleration      [Unit/s²]*/
  double Speed;                        /* Nominal speed     

--- Page 42 | Keyword: DoPE ---
Page 42 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
4.11 DoPERdOutChannelDef
DoPE_HANDLE DP
unsigned short OutChNo
DoPEOutChaDef FAR *OutChDef
Read analogue output channel definitions of opened set-up.
In: DoPEHdl DoPE link handle
OutChNo Output channel no. 
*OutChDef Pointer for DoPEOutChaDef structure
Returns: Error constant (DoP

--- Page 42 | Keyword: structure ---
Page 42 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
4.11 DoPERdOutChannelDef
DoPE_HANDLE DP
unsigned short OutChNo
DoPEOutChaDef FAR *OutChDef
Read analogue output channel definitions of opened set-up.
In: DoPEHdl DoPE link handle
OutChNo Output channel no. 
*OutChDef Pointer for DoPEOutChaDef structure
Returns: Error constant (DoPERR_xxxx)
4.12 DoPEWrOutChannelDef(Sync)
DoPE_HANDLE DP
Unsigned short OutChNo
DoPEOutChaDef FAR *CtrlSensorDef
WORD FAR                            *lpusTAN          (not for Sync. version)
Write analogue output channel definitions to opened set-up.
In: DoPEHdl 

--- Page 42 | Keyword: struct ---
Page 42 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
4.11 DoPERdOutChannelDef
DoPE_HANDLE DP
unsigned short OutChNo
DoPEOutChaDef FAR *OutChDef
Read analogue output channel definitions of opened set-up.
In: DoPEHdl DoPE link handle
OutChNo Output channel no. 
*OutChDef Pointer for DoPEOutChaDef structure
Returns: Error constant (DoPERR_xxxx)
4.12 DoPEWrOutChannelDef(Sync)
DoPE_HANDLE DP
Unsigned short OutChNo
DoPEOutChaDef FAR *CtrlSensorDef
WORD FAR                            *lpusTAN          (not for Sync. version)
Write analogue output channel definitions to opened set-up.
In: DoPEHdl 

--- Page 42 | Keyword: typedef ---
(not for Sync. version)
Write analogue output channel definitions to opened set-up.
In: DoPEHdl DoPE link handle
OutChNo Analogue Output channel no
*DoPEOutChaDef Pointer for DoPEOutChaDef structure
lpusTAN Pointer to Transaction-Number
Returns: Error constant (DoPERR_xxxx)
DoPEOutChaDef structure:
typedef struct                         /* Definition of output channel       */
  {                                    /* ---------------------------------- */
  WORD   Connector;                    /* Connector number of channel    [No]*/
  WORD   Sign;                         /* Invert sign of cha

--- Page 43 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 43 of 145DoPE
In: DP DoPE link handle
BitInNo Output channel no. 
*BitInDef Pointer for DoPEBitInDef structure
Returns: Error constant (DoPERR_xxxx)
4.14 DoPEWrBitInDef(Sync)
DoPE_HANDLE DP
Unsigned short BitInNo
DoPEBitInDef FAR * BitInDef
WORD FAR                            *lp

--- Page 43 | Keyword: structure ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 43 of 145DoPE
In: DP DoPE link handle
BitInNo Output channel no. 
*BitInDef Pointer for DoPEBitInDef structure
Returns: Error constant (DoPERR_xxxx)
4.14 DoPEWrBitInDef(Sync)
DoPE_HANDLE DP
Unsigned short BitInNo
DoPEBitInDef FAR * BitInDef
WORD FAR                            *lpusTAN          (not for Sync. version)
Write Bit input definitions to opened set-up.
In: DoPEHdl DoPE link handle
BitInNo

--- Page 43 | Keyword: struct ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 43 of 145DoPE
In: DP DoPE link handle
BitInNo Output channel no. 
*BitInDef Pointer for DoPEBitInDef structure
Returns: Error constant (DoPERR_xxxx)
4.14 DoPEWrBitInDef(Sync)
DoPE_HANDLE DP
Unsigned short BitInNo
DoPEBitInDef FAR * BitInDef
WORD FAR                            *lpusTAN          (not for Sync. version)
Write Bit input definitions to opened set-up.
In: DoPEHdl DoPE link handle
BitInNo

--- Page 43 | Keyword: typedef ---
     *lpusTAN          (not for Sync. version)
Write Bit input definitions to opened set-up.
In: DoPEHdl DoPE link handle
BitInNo Bit Input channel no
*DoPEBitInDef Pointer for DoPEBitInDef structure
lpusTAN Pointer to Transaction-Number
Returns: Error constant (DoPERR_xxxx)
DoPEBitInDef structure:
typedef struct                         /* Definition of bit output           */
  {                                    /* ---------------------------------- */
  WORD Connector;                      /* Connector number of device     [No]*/
  WORD InitValue;                      /* Initial value of d

--- Page 44 | Keyword: DoPE ---
Page 44 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
Returns: Error constant (DoPERR_xxxx)
DoPEBitOutDef structure:
typedef struct                         /* Definition of bit input            */
  {                                    /* ---------------------------------- */
  WORD Connector;                      /* Connector number

--- Page 44 | Keyword: structure ---
Page 44 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
Returns: Error constant (DoPERR_xxxx)
DoPEBitOutDef structure:
typedef struct                         /* Definition of bit input            */
  {                                    /* ---------------------------------- */
  WORD Connector;                      /* Connector number of device     [No]*/
  WORD StopMask;                       /* Set bit

--- Page 44 | Keyword: struct ---
Page 44 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
Returns: Error constant (DoPERR_xxxx)
DoPEBitOutDef structure:
typedef struct                         /* Definition of bit input            */
  {                                    /* ---------------------------------- */
  WORD Connector;                      /* Connector number of device     [No]*/
  WORD StopMask;                       /* Set bit

--- Page 44 | Keyword: typedef ---
Page 44 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
Returns: Error constant (DoPERR_xxxx)
DoPEBitOutDef structure:
typedef struct                         /* Definition of bit input            */
  {                                    /* ---------------------------------- */
  WORD Connector;                      /* Connector number of device     [No]*/
  WORD StopMask;                       /* Set bits stop the 

--- Page 45 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 45 of 145DoPE
  WORD   ShieldConnector;              /* Shield: connector number       [No]*/
  WORD   ShieldType;                   /* Shield: type simple/locked     [No]*/
  double ShieldTimeout;                /* Shield: timeout                 [s]*/
  } DoPEMachineDef;
4.19 D

--- Page 45 | Keyword: structure ---
ShieldTimeout;                /* Shield: timeout                 [s]*/
  } DoPEMachineDef;
4.19 DoPERdLinTbl
DoPE_HANDLE DP
DoPELinTblFalse FAR *LinTblFalse
DoPELinTblTrue FAR *LinTblTrue
Read linearisation table of opened set-up.
In: DoPEHdl DoPE link handle
*LinTblFalse Pointer to measured values structure
*LinTblTrue Pointer to reference values structure
Returns: Error constant (DoPERR_xxxx)
4.20 DoPEWrLinTbl(Sync)
DoPE_HANDLE DP
DoPELinTblFalse FAR *LinTblFalse
DoPELinTblTrue FAR *LinTblTrue
WORD FAR                            * lpusTANFirst      (not for Sync. version)
WORD FAR           

--- Page 45 | Keyword: struct ---
ShieldTimeout;                /* Shield: timeout                 [s]*/
  } DoPEMachineDef;
4.19 DoPERdLinTbl
DoPE_HANDLE DP
DoPELinTblFalse FAR *LinTblFalse
DoPELinTblTrue FAR *LinTblTrue
Read linearisation table of opened set-up.
In: DoPEHdl DoPE link handle
*LinTblFalse Pointer to measured values structure
*LinTblTrue Pointer to reference values structure
Returns: Error constant (DoPERR_xxxx)
4.20 DoPEWrLinTbl(Sync)
DoPE_HANDLE DP
DoPELinTblFalse FAR *LinTblFalse
DoPELinTblTrue FAR *LinTblTrue
WORD FAR                            * lpusTANFirst      (not for Sync. version)
WORD FAR           

--- Page 45 | Keyword: typedef ---
 DoPE link handle
*LinTblFalse Pointer to measured values structure
*LinTblTrue Pointer to reference values structure
*lpusTANFirst Pointer to first Transaction-Number
*lpusTANLast Pointer to last Transaction-Number
Returns: Error constant (DoPERR_xxxx)
DoPELinTblFalse and DoPELinTblTrue structure:
typedef struct                         /* Definition of linearisation table  */
  {                                    /* ---------------------------------- */
  WORD     LinNo;                      /* Number of points for mode lin. [No]*/
  double   FalseValue[LIN_DATA_MAX];   /* Measured value by 

--- Page 46 | Keyword: DoPE ---
Page 46 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
4.21 DoPERdGeneralData
DoPE_HANDLE DP
DoPEGeneralData FAR *GeneralData
Read general data of opened set-up.
In: DoPEHdl DoPE link handle
*GeneralData Pointer for DoPEGeneralData structure
Returns: Error constant (DoPERR_xxxx)
4.22 DoPEWrGeneralData(Sync)
DoPE_HANDLE DP
DoPEGeneralD

--- Page 46 | Keyword: structure ---
Page 46 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
4.21 DoPERdGeneralData
DoPE_HANDLE DP
DoPEGeneralData FAR *GeneralData
Read general data of opened set-up.
In: DoPEHdl DoPE link handle
*GeneralData Pointer for DoPEGeneralData structure
Returns: Error constant (DoPERR_xxxx)
4.22 DoPEWrGeneralData(Sync)
DoPE_HANDLE DP
DoPEGeneralData FAR *GeneralData
WORD FAR                            *lpusTAN          (not for Sync. version)
Write general data to opened set-up.
In: DoPEHdl DoPE link handle
*GeneralData Pointer for DoPEGe

--- Page 46 | Keyword: struct ---
Page 46 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
4.21 DoPERdGeneralData
DoPE_HANDLE DP
DoPEGeneralData FAR *GeneralData
Read general data of opened set-up.
In: DoPEHdl DoPE link handle
*GeneralData Pointer for DoPEGeneralData structure
Returns: Error constant (DoPERR_xxxx)
4.22 DoPEWrGeneralData(Sync)
DoPE_HANDLE DP
DoPEGeneralData FAR *GeneralData
WORD FAR                            *lpusTAN          (not for Sync. version)
Write general data to opened set-up.
In: DoPEHdl DoPE link handle
*GeneralData Pointer for DoPEGe

--- Page 46 | Keyword: typedef ---

WORD FAR                            *lpusTAN          (not for Sync. version)
Write general data to opened set-up.
In: DoPEHdl DoPE link handle
*GeneralData Pointer for DoPEGeneralData structure
*lpusTAN Pointer to Transaction-Number
Returns: Error constant (DoPERR_xxxx)
DoPEGeneralData structure:
typedef struct                         /* General data                       */
  {                                    /* ---------------------------------- */
  WORD   MachineNo;                    /* Number of active machines      [No]*/
  WORD   MachineNoIo;                  /* Use IO's to select

--- Page 47 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 47 of 145DoPE
4.23 DoPESelSetup
DoPE_HANDLE DP
unsigned short SetupNo
UserScale FAR US
WORD  FAR *lpusTANFirst
WORD  FAR *lpusTANLast
Select a machine set-up and initialise.
Set-up number 1 to 4 are stored inside EDC in a EEPROM. Set-up number 0 is the working set-up.
If set-up 1

--- Page 47 | Keyword: structure ---
ion number.
lpusTANLast Pointer to last transaction number.
Returns: Error constant (DoPERR_xxxx)
4.24 DoPERdSensorInfo
DoPE_HANDLE DP
unsigned short SensorNo
DoPESumSenInfo FAR *Info
Read summary sensor information’s.
In: DoPEHdl DoPE link handle
SensorNo Sensor Number
*Info Pointer for SumSenInfo structure
Returns: Error constant (DoPERR_xxxx)
DoPESumSenInfo structure:
typedef struct                         /* Summary Sensor Information         */
  {                                    /* ---------------------------------- */
  WORD   Connector;                    /* Connector number of sens

--- Page 47 | Keyword: struct ---
ion number.
lpusTANLast Pointer to last transaction number.
Returns: Error constant (DoPERR_xxxx)
4.24 DoPERdSensorInfo
DoPE_HANDLE DP
unsigned short SensorNo
DoPESumSenInfo FAR *Info
Read summary sensor information’s.
In: DoPEHdl DoPE link handle
SensorNo Sensor Number
*Info Pointer for SumSenInfo structure
Returns: Error constant (DoPERR_xxxx)
DoPESumSenInfo structure:
typedef struct                         /* Summary Sensor Information         */
  {                                    /* ---------------------------------- */
  WORD   Connector;                    /* Connector number of sens

--- Page 47 | Keyword: typedef ---
 constant (DoPERR_xxxx)
4.24 DoPERdSensorInfo
DoPE_HANDLE DP
unsigned short SensorNo
DoPESumSenInfo FAR *Info
Read summary sensor information’s.
In: DoPEHdl DoPE link handle
SensorNo Sensor Number
*Info Pointer for SumSenInfo structure
Returns: Error constant (DoPERR_xxxx)
DoPESumSenInfo structure:
typedef struct                         /* Summary Sensor Information         */
  {                                    /* ---------------------------------- */
  WORD   Connector;                    /* Connector number of sensor     [No]*/
  double NominalValue;                 /* Nominal value of s

--- Page 47 | Keyword: DoPESelSetup ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 47 of 145DoPE
4.23 DoPESelSetup
DoPE_HANDLE DP
unsigned short SetupNo
UserScale FAR US
WORD  FAR *lpusTANFirst
WORD  FAR *lpusTANLast
Select a machine set-up and initialise.
Set-up number 1 to 4 are stored inside EDC in a EEPROM. Set-up number 0 is the working set-up.
If set-up 1 to 4 is selected, set-up data and basi

--- Page 48 | Keyword: DoPE ---
Page 48 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
  WORD   SoftLimitReaction;            /* reaction if soft limit         [No]*/
  double BasicTare;                    /* Basic   tare                 [Unit]*/
  } DoPESumSenInfo;
4.25 DoPERdSysUserData
DoPE_HANDLE DP
BYTE FAR *SysUsrData
unsigned Length
Read system user data (16 

--- Page 49 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 49 of 145DoPE
4.27 DoPERdSenUserData
DoPE_HANDLE DP
BYTE FAR *SenUsrData
unsigned Length
Read sensor user data (128 Byte). The applic ation program may use this 128 bytes EEPROM data
to store information about the sensor. The EEPROM is located insi de the sensor plug!
In: DoPEHdl

--- Page 50 | Keyword: DoPE ---
Page 50 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
4.30 DoPEWrSensorUserData
DoPE_HANDLE DoPEHdl
WORD Connector
BYTE *SenUsrData
unsigned Length
This function has the same effect as DoPEWr SenUserData. But use here a connector number
instead of a sensor number. It may also  be used for not initialized sensors.
Write sensor user da

--- Page 51 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 51 of 145DoPE
5 Message and Data handling
5.1 DoPESendMsg(Sync)
DoPE_HANDLE DoPEHdl
void FAR *Buffer
unsigned Length
WORD FAR *lpusTAN
Send a message to EDC. This function is only needed if you have to communicate directly to
EDC's Subsystem. The message must be a command to the 

--- Page 51 | Keyword: struct ---
Page 51 of 145DoPE
5 Message and Data handling
5.1 DoPESendMsg(Sync)
DoPE_HANDLE DoPEHdl
void FAR *Buffer
unsigned Length
WORD FAR *lpusTAN
Send a message to EDC. This function is only needed if you have to communicate directly to
EDC's Subsystem. The message must be a command to the subsystem (see struct below).
Refer Documentation Subsystem for Test Machine Control.
Attention: This function is not av ailable for Visual Basic program's!
In: DoPEHdl DoPE link handle
Buffer Pointer to message to transmit
Length Message length in bytes
lpusTAN Pointer to Transaction-Number
Returns: Error constan

--- Page 51 | Keyword: DoPESetNotification ---
                 */
    aPSxxxx           Usr;    /* command specific data see pmx.h           */
  } Buf;
5.2 DoPEGetMsg
DoPE_HANDLE DoPEHdl
void FAR *Buffer
unsigned BufSize
unsigned FAR *Length
Get a message from receive buffer. Incoming me ssages (from EDC) are stored inside DoPE. If
enabled by DoPESetNotification, DoPE  will signal the incoming message by
"DoPEEVT_RXAVAIL" event. You can read a stored message with this command.
Messages may be error messages, end of positioni ng message, run time errors or sensor messages
(see below).
In: DoPEHdl DoPE link handle
Buffer Pointer to message

--- Page 52 | Keyword: DoPE ---
Page 52 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
5.2.1 Command error messages
The parameter of all DoPE commands are checked and if not correct a erro r message is generated.
Due to the remote state of EDC this error messa ge is received from the PC some few milliseconds
after the command has been transmitted. Synchr onous DoPE 

--- Page 52 | Keyword: structure ---
from the PC some few milliseconds
after the command has been transmitted. Synchr onous DoPE command wait util the result of the
parameter check is received and pas the result as the function return value.
Asynchronous DoPE commands do not wait. The error message must be read by DoPEGetMsg
function.
Structure of command error messages:
  typedef  struct  DoPECommandError   /* Command error                        */
    {                                 /* ------------------------------------ */
    unsigned short     CommandNumber; /* Number of command                    */
    unsigned short  

--- Page 52 | Keyword: struct ---
from the PC some few milliseconds
after the command has been transmitted. Synchr onous DoPE command wait util the result of the
parameter check is received and pas the result as the function return value.
Asynchronous DoPE commands do not wait. The error message must be read by DoPEGetMsg
function.
Structure of command error messages:
  typedef  struct  DoPECommandError   /* Command error                        */
    {                                 /* ------------------------------------ */
    unsigned short     CommandNumber; /* Number of command                    */
    unsigned short  

--- Page 52 | Keyword: typedef ---
 the command has been transmitted. Synchr onous DoPE command wait util the result of the
parameter check is received and pas the result as the function return value.
Asynchronous DoPE commands do not wait. The error message must be read by DoPEGetMsg
function.
Structure of command error messages:
  typedef  struct  DoPECommandError   /* Command error                        */
    {                                 /* ------------------------------------ */
    unsigned short     CommandNumber; /* Number of command                    */
    unsigned short     ErrorNumber;   /* Number of error   

--- Page 53 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 53 of 145DoPE
CMD_ERROR_MSGNO (2001)
Unknown message ID.
CMD_ERROR_VERSION (2003)
Wrong PE interface version.
CMD_ERROR_OPEN (2004)
Set-up not opened.
CMD_ERROR_MEMORY (2005)
Not enough memory.
5.2.2 Run-time error messages
Errors or events that happen during the system is  runni

--- Page 53 | Keyword: structure ---
 message ID.
CMD_ERROR_VERSION (2003)
Wrong PE interface version.
CMD_ERROR_OPEN (2004)
Set-up not opened.
CMD_ERROR_MEMORY (2005)
Not enough memory.
5.2.2 Run-time error messages
Errors or events that happen during the system is  running, are reported to the application program as
run-time errors.
Structure of run-time error message:
  typedef  struct  DoPERunTimeError   /* Run time error (old style)               */
    {                                 /* -----------------------------------------*/
    unsigned short     ErrorNumber;   /* Number of run time error                 */
    doub

--- Page 53 | Keyword: struct ---
 message ID.
CMD_ERROR_VERSION (2003)
Wrong PE interface version.
CMD_ERROR_OPEN (2004)
Set-up not opened.
CMD_ERROR_MEMORY (2005)
Not enough memory.
5.2.2 Run-time error messages
Errors or events that happen during the system is  running, are reported to the application program as
run-time errors.
Structure of run-time error message:
  typedef  struct  DoPERunTimeError   /* Run time error (old style)               */
    {                                 /* -----------------------------------------*/
    unsigned short     ErrorNumber;   /* Number of run time error                 */
    doub

--- Page 53 | Keyword: typedef ---
rong PE interface version.
CMD_ERROR_OPEN (2004)
Set-up not opened.
CMD_ERROR_MEMORY (2005)
Not enough memory.
5.2.2 Run-time error messages
Errors or events that happen during the system is  running, are reported to the application program as
run-time errors.
Structure of run-time error message:
  typedef  struct  DoPERunTimeError   /* Run time error (old style)               */
    {                                 /* -----------------------------------------*/
    unsigned short     ErrorNumber;   /* Number of run time error                 */
    double             Time;          /* System

--- Page 54 | Keyword: DoPE ---
Page 54 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
RTE_STOP (205)
Drive not ready.
RTE_DF_KEY (206)
“Drive enable” output signal was withdraw n due to an inactive  input signal “Drive
enable”.
RTE_SHALT (207)
Machine was halted in position control due to a active input signal. This normally happens
after “STOP” key at EDC front pa

--- Page 54 | Keyword: structure ---
ge limit exceeded.
RTE_LOWER_LIMIT (302)
Lower range limit exceeded.
RTE_ERROR_UNHANDLED (999)
Unknown runtime error.
5.2.3 Movement control messages
Positioning, or in general movement commands, re port their regular or irregular completion with
movement control messages. There are four different  structures to access di fferent parameter. Please
refer to the list of movement control messages below.
  typedef  struct  DoPEMoveCtrlMsg    /* Messages of movement control         */
    {                                 /* ------------------------------------ */
    unsigned short     MsgId;     

--- Page 54 | Keyword: struct ---
ge limit exceeded.
RTE_LOWER_LIMIT (302)
Lower range limit exceeded.
RTE_ERROR_UNHANDLED (999)
Unknown runtime error.
5.2.3 Movement control messages
Positioning, or in general movement commands, re port their regular or irregular completion with
movement control messages. There are four different  structures to access di fferent parameter. Please
refer to the list of movement control messages below.
  typedef  struct  DoPEMoveCtrlMsg    /* Messages of movement control         */
    {                                 /* ------------------------------------ */
    unsigned short     MsgId;     

--- Page 54 | Keyword: typedef ---
time error.
5.2.3 Movement control messages
Positioning, or in general movement commands, re port their regular or irregular completion with
movement control messages. There are four different  structures to access di fferent parameter. Please
refer to the list of movement control messages below.
  typedef  struct  DoPEMoveCtrlMsg    /* Messages of movement control         */
    {                                 /* ------------------------------------ */
    unsigned short     MsgId;         /* ID of message                        */
    double             Time;          /* System time for th

--- Page 55 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 55 of 145DoPE
List of movement control messages:
CMSG_POS (1) use DoPEMCM
A positioning command has been successfully competed and the machine reached the
destination window within th e specified time. The parameter “Control” and “Position”
represent the position genera tor value

--- Page 56 | Keyword: DoPE ---
Page 56 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
CMSG_OFFSET (49) use DoPEOffsCM
The offset correction run has been termin ated successfully. The parameter “Offset”
contains the determined offs et of the power amplifier. 
CMSG_CHECK (51) use DoPECheckM
One of the active measurement channel superv isions has triggered. The action

--- Page 56 | Keyword: struct ---
sor message (only serial sensors)
A serial “sensor” may be connected  via RS232 (X62A – X62D) to EDC60/120.
If it is specified with “NoProtocol”, it’s data ar e not interpreted by EDC or  Dope, but send to the
application program. Following message will be given to the application program:
typedef  struct  DoPESensorMsg        /* Sensor Message                       */
  {                                   /* ------------------------------------ */
    double         Time;              /* System time for the message          */
    unsigned short SensorNo;          /* Sensor Number 0 .. 15    

--- Page 56 | Keyword: typedef ---
5.2.4 Sensor message (only serial sensors)
A serial “sensor” may be connected  via RS232 (X62A – X62D) to EDC60/120.
If it is specified with “NoProtocol”, it’s data ar e not interpreted by EDC or  Dope, but send to the
application program. Following message will be given to the application program:
typedef  struct  DoPESensorMsg        /* Sensor Message                       */
  {                                   /* ------------------------------------ */
    double         Time;              /* System time for the message          */
    unsigned short SensorNo;          /* Sensor Number 0 

--- Page 57 | Keyword: DoPEData ---
PEHdl
void FAR *Buffer
Get samples from receiver buffer. DoPE receives m easuring data in a adjustable time scale. The
data record is stored inside Do PE in a circular buffer. You can read one data record with this
function. This data record will be deleted in the circular buffer. For definition of DoPEData
record refer to Page 128.
In: DoPEHdl DoPE link handle
Buffer Pointer to buffer for data record.
Buffer must be big enough to store the DoPEData structure
Out: *Buffer DoPEData record
Returns: Error constant (DoPERR_xxxx)

--- Page 57 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 57 of 145DoPE
5.3 DoPEGetData
DoPE_HANDLE DoPEHdl
void FAR *Buffer
Get samples from receiver buffer. DoPE receives m easuring data in a adjustable time scale. The
data record is stored inside Do PE in a circular buffer. You can read one data record with this
function. This data r

--- Page 57 | Keyword: structure ---
in a circular buffer. You can read one data record with this
function. This data record will be deleted in the circular buffer. For definition of DoPEData
record refer to Page 128.
In: DoPEHdl DoPE link handle
Buffer Pointer to buffer for data record.
Buffer must be big enough to store the DoPEData structure
Out: *Buffer DoPEData record
Returns: Error constant (DoPERR_xxxx)

--- Page 57 | Keyword: struct ---
in a circular buffer. You can read one data record with this
function. This data record will be deleted in the circular buffer. For definition of DoPEData
record refer to Page 128.
In: DoPEHdl DoPE link handle
Buffer Pointer to buffer for data record.
Buffer must be big enough to store the DoPEData structure
Out: *Buffer DoPEData record
Returns: Error constant (DoPERR_xxxx)

--- Page 57 | Keyword: record ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 57 of 145DoPE
5.3 DoPEGetData
DoPE_HANDLE DoPEHdl
void FAR *Buffer
Get samples from receiver buffer. DoPE receives m easuring data in a adjustable time scale. The
data record is stored inside Do PE in a circular buffer. You can read one data record with this
function. This data record will be deleted in the circular buffer. For definition of DoPEData
record refer to Page 128.
In: DoPEHdl DoPE link handle
Buffer Pointer to buffer for data record.
Buffer must be big

--- Page 58 | Keyword: DoPEData ---
Page 58 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
5.4 DoPECurrentData
DoPE_HANDLE DoPEHdl
void FAR *Buffer
Get current samples from receiver buffer. This f unction reads the latest data record. This data
record will not be deleted in the circular buffer. For definition of DoPEData record refer to Page
128.
In: DoPEHdl DoPE link handle
Buffer Pointer to buffer for data record.
Buffer must be big enough to store the DoPEData structure
Out: *Buffer DoPEData record
Returns: Error constant (DoPERR_xxxx)
5.5 DoPEClearReceiver
DoPE_HANDLE DoPEHdl
Discard all received messag

--- Page 58 | Keyword: DoPE ---
Page 58 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
5.4 DoPECurrentData
DoPE_HANDLE DoPEHdl
void FAR *Buffer
Get current samples from receiver buffer. This f unction reads the latest data record. This data
record will not be deleted in the circular buffer. For definition of DoPEData record refer to Page
128.
In: DoPEHdl DoPE link h

--- Page 58 | Keyword: structure ---
from receiver buffer. This f unction reads the latest data record. This data
record will not be deleted in the circular buffer. For definition of DoPEData record refer to Page
128.
In: DoPEHdl DoPE link handle
Buffer Pointer to buffer for data record.
Buffer must be big enough to store the DoPEData structure
Out: *Buffer DoPEData record
Returns: Error constant (DoPERR_xxxx)
5.5 DoPEClearReceiver
DoPE_HANDLE DoPEHdl
Discard all received messages. If you want to get rid of old messages, that are of no interest any
more, use this command.
In: DoPEHdl DoPE link handle
Returns: Error constant (DoPE

--- Page 58 | Keyword: struct ---
from receiver buffer. This f unction reads the latest data record. This data
record will not be deleted in the circular buffer. For definition of DoPEData record refer to Page
128.
In: DoPEHdl DoPE link handle
Buffer Pointer to buffer for data record.
Buffer must be big enough to store the DoPEData structure
Out: *Buffer DoPEData record
Returns: Error constant (DoPERR_xxxx)
5.5 DoPEClearReceiver
DoPE_HANDLE DoPEHdl
Discard all received messages. If you want to get rid of old messages, that are of no interest any
more, use this command.
In: DoPEHdl DoPE link handle
Returns: Error constant (DoPE

--- Page 58 | Keyword: record ---
Page 58 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
5.4 DoPECurrentData
DoPE_HANDLE DoPEHdl
void FAR *Buffer
Get current samples from receiver buffer. This f unction reads the latest data record. This data
record will not be deleted in the circular buffer. For definition of DoPEData record refer to Page
128.
In: DoPEHdl DoPE link handle
Buffer Pointer to buffer for data record.
Buffer must be big enough to store the DoPEData structure
Out: *Buffer DoPEData record
Returns: Error const

--- Page 58 | Keyword: typedef ---
tant (DoPERR_xxxx)
5.7 DoPEGetState
DoPE_HANDLE DoPEHdl
DoPEState FAR *Status
Get state information structure.
In: DoPEHdl DoPE link handle
Status Pointer to buffer for state information
Out: *Status State information (see below) 
Returns: Error constant (DoPERR_xxxx)
State information structure:
  typedef struct
    {
    unsigned  ComState;                /* Communication state                  */
    unsigned  RcvBuffer;               /* Number messages in receive queue     */
    unsigned  XmitBuffer;              /* Number of messages to be transmitted */
    } DoPEState;
Constants for Co

--- Page 59 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 59 of 145DoPE
  #define COM_STATE_OFFLINE    1         /* Link is offline                   */
  #define COM_STATE_INITCYCLE  2         /* Link is initialising              */
  #define COM_STATE_ONLINE     3         /* Link is established and OnLine    */
5.8 DoPEGetErrors
DoPE_

--- Page 59 | Keyword: structure ---
rent error counter values. DoPE counts all sort of communi cation errors. You may read this
errors by using this command.
In: DoPEHdl DoPE link handle
Error Pointer to buffer for error counters
Out: *Error Current error counter values (see below) 
Returns: Error constant (DoPERR_xxxx)
The DoPEError-structure contains several comm unication error counters. Whenever an error is
detected, the appropriate counter is increased by one. This error c ounters are useful to annualise
communication problems.
typedef  struct                        /* Error counters                */
    {
    unsigned   P

--- Page 59 | Keyword: struct ---
rent error counter values. DoPE counts all sort of communi cation errors. You may read this
errors by using this command.
In: DoPEHdl DoPE link handle
Error Pointer to buffer for error counters
Out: *Error Current error counter values (see below) 
Returns: Error constant (DoPERR_xxxx)
The DoPEError-structure contains several comm unication error counters. Whenever an error is
detected, the appropriate counter is increased by one. This error c ounters are useful to annualise
communication problems.
typedef  struct                        /* Error counters                */
    {
    unsigned   P

--- Page 59 | Keyword: typedef ---
or Current error counter values (see below) 
Returns: Error constant (DoPERR_xxxx)
The DoPEError-structure contains several comm unication error counters. Whenever an error is
detected, the appropriate counter is increased by one. This error c ounters are useful to annualise
communication problems.
typedef  struct                        /* Error counters                */
    {
    unsigned   Parity;                 /* Parity errors                 */
    unsigned   Overrun;                /* Overrun errors                */
    unsigned   Frame;                  /* Framing errors             

--- Page 60 | Keyword: DoPE ---
Page 60 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
6 Configuration
6.1 DoPERdVersion
DoPE_HANDLE DP
DoPEVersion FAR *Version
Read Version strings.
In: DoPEHdl DoPE link handle
Version Version strings
Returns: Error constant (DoPERR_xxxx)
6.2 Data Acquisition commands
6.2.1 DoPERefr(Sync)
DoPE_HANDLE DP
double Refresh
WORD FAR     

--- Page 61 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 61 of 145DoPE
6.2.3 DoPETransmitData(Sync)
DoPE_HANDLE DP
unsigned short Enable
WORD FAR                            *lpusTAN          (not for Sync. version)
Activate / Deactivate transmission of data. If de activated no measuring data will be transmitted to
the PC! 
In: DoPEHdl 

--- Page 62 | Keyword: DoPEData ---
Page 62 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
6.2.5 DoPECtrlTestValues
DoPE_HANDLE DP
unsigned short State
Enable or disable the controller Te st values in the DoPEData record.
The three Test values are configured to:
Test1: Command
Test2: Feedback
Test3: Output
In: DoPEHdl DoPE link handle
State TRUE:  enables
FALSE: disables the controller test  values in the DoPEData record.
Returns: Error constant (DoPERR_xxxx)
6.3 Safety Shield
In order to protect the

--- Page 62 | Keyword: DoPE ---
Page 62 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
6.2.5 DoPECtrlTestValues
DoPE_HANDLE DP
unsigned short State
Enable or disable the controller Te st values in the DoPEData record.
The three Test values are configured to:
Test1: Command
Test2: Feedback
Test3: Output
In: DoPEHdl DoPE link handle
State TRUE:  enables
FALSE: disable

--- Page 62 | Keyword: record ---
Page 62 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
6.2.5 DoPECtrlTestValues
DoPE_HANDLE DP
unsigned short State
Enable or disable the controller Te st values in the DoPEData record.
The three Test values are configured to:
Test1: Command
Test2: Feedback
Test3: Output
In: DoPEHdl DoPE link handle
State TRUE:  enables
FALSE: disables the controller test  values in the DoPEData record.
Returns: Error constant (DoPERR_xxxx)
6.3 Safety Shield
In order to protect the user fro

--- Page 63 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 63 of 145DoPE
The following picture illustrates the input si gnals of the simple shield control. 
Shield exists
Shield closedInput SignalsLimit loads
S-HaltSimple Shield
Control
Meaning of the Signals:
1. Shield exists
indicates the existence of the necessary hardware for the shi

--- Page 64 | Keyword: DoPE ---
Page 64 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
Lockable Shield:
The following picture illustrates the input- and output  signals of the lockable shield control. 
S hield exists
S hield closed
S hield locked
L ock shieldS hield T E S T
(key-sw itch)Input signals
Out put si gnalsL im it loads
S-Hal tL ockable Shield
Cont r ol
Me

--- Page 65 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 65 of 145DoPE
6.3.1 DoPEShieldLimit(Sync)
DoPE_HANDLE DP
unsigned short SensorNo
double UprLock
double UprUnLock
double LwrUnLock
double LwrLock
unsigned short CtrlLimit
double SpeedLimit
unsigned short CtrlAction
unsigned short Action
WORD FAR                            *lpusTAN

--- Page 66 | Keyword: DoPE ---
Page 66 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
6.3.3 DoPEShieldLock(Sync)
DoPE_HANDLE DP
WORD State
WORD FAR                            *lpusTAN          (not for Sync. version)
Lock or unlock the shield.
In: DoPEHdl DoPE link handle
State State of Shield lock. (TRUE = Lock, FALSE = UNLOCK)
lpusTAN Pointer to Transaction-Numbe

--- Page 67 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 67 of 145DoPE
Mode Mode, how the limit is detected. (see below)
Action This action will be activated  if the check hits. (see below)
Ctrl Control mode for selected action
(CTRL_POS, CTRL_LOAD or CTRL_EXTENSION)
Acc Acceleration
Speed maximum speed
Dec Deceleration
Destination Fin

--- Page 67 | Keyword: structure ---
leration
ACTION_POS Position with default deceleration
ACTION_POS_A Position with specified deceleration
ACTION_XPCONT Change control mode, go on with current speed
ACTION_STOP STOP (switch off drive)
ACTION_NOACTION No action, only message to host
ACTION_SETOL Set command output (only in open loop structure)
ACTION_SHAL Immediate Halt in X-head position control
ACTION_UP Move Up with specified speed
ACTION_DOWN Move Down with specified speed
6.4.3 DoPEClrCheck(Sync)
DoPE_HANDLE DP
unsigned short CheckId
WORD FAR                            *lpusTAN          (not for Sync. version)
Deactivate a

--- Page 67 | Keyword: struct ---
leration
ACTION_POS Position with default deceleration
ACTION_POS_A Position with specified deceleration
ACTION_XPCONT Change control mode, go on with current speed
ACTION_STOP STOP (switch off drive)
ACTION_NOACTION No action, only message to host
ACTION_SETOL Set command output (only in open loop structure)
ACTION_SHAL Immediate Halt in X-head position control
ACTION_UP Move Up with specified speed
ACTION_DOWN Move Down with specified speed
6.4.3 DoPEClrCheck(Sync)
DoPE_HANDLE DP
unsigned short CheckId
WORD FAR                            *lpusTAN          (not for Sync. version)
Deactivate a

--- Page 68 | Keyword: DoPE ---
Page 68 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
6.4.4 DoPESetCheckLimit(Sync)
DoPE_HANDLE DP
unsigned short SensorNo
double UprLimitSet
double UprLimitReset
double LwrLimitReset
double LwrLimitSet
WORD FAR                            *lpusTAN          (not for Sync. version)
Activate a limit supervision for a measuring channe l.

--- Page 69 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 69 of 145DoPE
6.5 Controller Parameter
6.5.1 DoPEPosPID (Sync)
DoPE_HANDLE DoPEHdl
unsigned short MoveCtrl
unsigned long P
unsigned short I
unsigned short D
WORD FAR                            *lpusTAN          (not for Sync. version)
This function replaces the older function “Do

--- Page 70 | Keyword: DoPE ---
Page 70 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
I Integration time constant
D Derivative time constant
lpusTAN Pointer to Transaction-Number
Returns: Error constant (DoPERR_xxxx)
6.5.3 DoPEPosFeedForward(Sync)
DoPE_HANDLE DoPEHdl
unsigned short MoveCtrl
unsigned long P
WORD FAR                            *lpusTAN          (not 

--- Page 71 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 71 of 145DoPE
6.5.4 DoPEDestWnd(Sync)
DoPE_HANDLE DP
unsigned short MoveCtrl
double WndSize
double WndTime
WORD FAR                            *lpusTAN          (not for Sync. version)
Definitions for destination window.
The closed loop controller supervises the controll ed chann

--- Page 72 | Keyword: DoPE ---
Page 72 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
6.5.5 DoPESft(Sync)
DoPE_HANDLE DP
unsigned short MoveCtrl
double UpperSft
double LowerSft
unsigned short Reaction
WORD FAR                            *lpusTAN          (not for Sync. version)
Definitions of limits supervised by software (softend). All moving commands will limit
d

--- Page 72 | Keyword: struct ---
f the measuremen t channels, they are working limits that can be
changed during the operation of the machine in  some defined conditions. Additionally, the
softend’s can be used for the s upervision of movement sequences.
The softend’s provide the limits for the destination positions for movement instructions and are
implicitly used as destination positions for movement instructions. The state of the softend’s is
maintained in CtrlState2 (see default measuring dada record).
Attention: The values for UpperSft and LowerSft ar e calculated with the current Tare and
BasicTare.If BasicTare is chang

--- Page 72 | Keyword: record ---
be used for the s upervision of movement sequences.
The softend’s provide the limits for the destination positions for movement instructions and are
implicitly used as destination positions for movement instructions. The state of the softend’s is
maintained in CtrlState2 (see default measuring dada record).
Attention: The values for UpperSft and LowerSft ar e calculated with the current Tare and
BasicTare.If BasicTare is changed, these values are recalculated with the new BasicTare.
A new Tare does not effect these vales!
In: DoPEHdl DoPE link handle
MoveCtrl Control mode
(CTRL_POS, CTRL_LOAD 

--- Page 73 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 73 of 145DoPE
6.5.6 DoPECtrlError(Sync)
DoPE_HANDLE DP
unsigned short MoveCtrl
double Error
unsigned short Reaction
WORD FAR                            *lpusTAN          (not for Sync. version)
Define maximum error signal for cl osed loop controller. The closed  loop controller s

--- Page 74 | Keyword: DoPE ---
Page 74 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
6.5.8 DoPECtrlSpeedTimeBase(Sync)
DoPE_HANDLE DP
double Time
WORD FAR                            *lpusTAN          (not for Sync. version)
Define maximum time base for speed calculation.
When changing control mode, the current speed of the new control channel is used as the start


--- Page 75 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 75 of 145DoPE
In: DoPEHdl DoPE link handle
SensorBits Bit 0 .. 15 define the se nsor Number to be calibrated. 
Bit 0 = 1 Calibrate Sensor 0
Bit 1 = 1 Calibrate Sensor 1 ... 
lpusTAN Pointer to Transaction-Number
Returns: Error constant (DoPERR_xxxx)

--- Page 76 | Keyword: DoPE ---
Page 76 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
6.7 Tare functions
DoPE offers two different tare  functions, Tare and BasicTare.
The DoPESetBasicTare  function should be used for set-up th e machine configuration like changing
clamps. The Basic-Tare value is stored in the active machine set-up inside EDC. After switching
mains

--- Page 77 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 77 of 145DoPE
6.7.3 DoPEGetBasicTare
DoPE_HANDLE DP
unsigned short SensorNo
double  FAR *BasicTare
Read tare value of the measuring channel.
In: DP DoPE link handle
SensorNo Sensor Number
*BasicTare Pointer for BasicTare
Out: BasicTare Active value for BasicTare
Returns: Error co

--- Page 78 | Keyword: DoPE ---
Page 78 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
6.8 Calculated measuring channels
Additional to the measured values determined by sensors, the system provides some formulas for
calculated measuring channels. The calculated values are basically calculated from physical measured
values. All physical measured valu es are transferr

--- Page 78 | Keyword: record ---
cal measured valu es are transferred into a circular buffer at a fixed time base of
20 ms. This circular buffer has 128 entries. Fo r analogue channels, the integration time may be
defined.
lmc16 lmc1 lmc2 lmc3
.......Circular buffer 1 for physically measured values
cmc8 cmc1 cmc2 cmc3
.......
Data recordTransferred every 20 ms
Adjustable time base
normally 20 ms Formula1
Formula2Circular buffer for calculated valuesHardware
Transferred with System time base (e.g.. 2,5 ms)
The input values for the calculation are read from  this circular buffer, calculated by the desired
formula and transferre

--- Page 79 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 79 of 145DoPE
6.8.1 DoPEConfCMcSpeed(Sync)
DoPE_HANDLE DP
unsigned short CalculatedSensorNo
unsigned short SensorNo
double IntegrationTime
double Timebase
WORD FAR                            * lpusTANFirst      (not for Sync. version)
WORD FAR                            * lpusTAN

--- Page 79 | Keyword: record ---
signed short CalculatedSensorNo
unsigned short SensorNo
double IntegrationTime
double Timebase
WORD FAR                            * lpusTANFirst      (not for Sync. version)
WORD FAR                            * lpusTANLast       (not for Sync. version)
Configure calculated speed to measuring data record.
From any measuring channel spee d (the first differentiation) ma y be calculated and configured
to the data record. After it is configured, it ma y be used as the supervised channel in the
command "DoPESetCheck".
This calculated channel is not allowed as th e command channel in DoPEExts2 or 

--- Page 80 | Keyword: DoPE ---
Page 80 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
6.8.3 DoPEConfCMcGradient(Sync)
DoPE_HANDLE DP
unsigned short CalculatedSensorNo
unsigned short DividentSensorNo
unsigned short DivisorSensorNo
double IntegrationTime
double Timebase
WORD FAR                            * lpusTANFirst      (not for Sync. version)
WORD FAR          

--- Page 80 | Keyword: record ---
ed short DivisorSensorNo
double IntegrationTime
double Timebase
WORD FAR                            * lpusTANFirst      (not for Sync. version)
WORD FAR                            * lpusTANLast       (not for Sync. version)
Configure calculated gradient between two measured values to measuring data record.
A gradient between two measured values may be calculated and configured to the data record.
After it is configured, it may be used as  the supervised channel in the command
"DoPESetCheck".
This calculated channel is not allowed as th e command channel in DoPEExts2 or DoPEFDPoti
command!
In: 

--- Page 81 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 81 of 145DoPE
6.8.5 DoPEMc2Output(Sync)
DoPE_HANDLE DP
unsigned short Mode
unsigned short SensorNo
double OffsetSensor
unsigned short Output
double OffsetOutput
double Scale
WORD FAR                            *lpusTAN          (not for Sync. version)
Output of a measured value t

--- Page 82 | Keyword: DoPE ---
Page 82 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
6.8.6 DoPEConfPeakValue(Sync)
DoPE_HANDLE DP
unsigned short PositionMin
unsigned short PositionMax
unsigned short LoadMin
unsigned short LoadMax
unsigned short ExtensionMin
unsigned short ExtensionMax
WORD FAR                            * lpusTANFirst      (not for Sync. version)


--- Page 82 | Keyword: record ---
signed short LoadMin
unsigned short LoadMax
unsigned short ExtensionMin
unsigned short ExtensionMax
WORD FAR                            * lpusTANFirst      (not for Sync. version)
WORD FAR                            * lpusTANLast       (not for Sync. version)
Configure peak values to measuring data record.
The peak values are detected by the EDC. They  may be transmitted to PC instead of an unused
measuring channel. With this command the peak values for X-head position, load and extension
may be configured to measuring channels in  the data record. SENSOR4 to SENSOR15 are
allowed to be configu

--- Page 83 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 83 of 145DoPE
6.9 Reference signal handling of incremental sensors
Incremental sensors like encoder or linear gauges ma y use the build in reference to set the counter-
value. Encoder have one reference pulse per revolu tion. Linear gauges have either one pulse at a
certain posit

--- Page 83 | Keyword: struct ---
) you get the exact position of the reference pulse.
In: DoPEHdl DoPE link handle
SensorNo Sensor Number
Mode reference signal messages will be reported:
REFSIG_NON:  neverREFSIG_ON:   always
REFSIG_ONCE: only once
lpusTAN Pointer to Transaction-Number
Returns: Error constant (DoPERR_xxxx)
typedef  struct  DoPERefSignalMsg     /* 'Reference Signal' Message           */
  {                                   /* ------------------------------------ */
    unsigned short     MsgId;         /* ID of message                        */
    double             Time;          /* System time for the messa

--- Page 83 | Keyword: typedef ---
SignalMsg) you get the exact position of the reference pulse.
In: DoPEHdl DoPE link handle
SensorNo Sensor Number
Mode reference signal messages will be reported:
REFSIG_NON:  neverREFSIG_ON:   always
REFSIG_ONCE: only once
lpusTAN Pointer to Transaction-Number
Returns: Error constant (DoPERR_xxxx)
typedef  struct  DoPERefSignalMsg     /* 'Reference Signal' Message           */
  {                                   /* ------------------------------------ */
    unsigned short     MsgId;         /* ID of message                        */
    double             Time;          /* System time for 

--- Page 84 | Keyword: DoPE ---
Page 84 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
6.9.2 DoPESetRefSignalTare
DoPE_HANDLE DoPEHdl
unsigned short SensorNo
unsigned short Mode
double Tare
WORD FAR *lpusTAN
With this function, the processing of the next reference pulse is done in side DoPE. The reference
pulse is used to set the BasicTare-value to a certain value. 

--- Page 85 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 85 of 145DoPE
7 Input / Output-Commands
7.1 Analogue output
7.1.1 DoPESetOutput(Sync)
DoPE_HANDLE DP
unsigned short Output
double Value
WORD FAR                            *lpusTAN          (not for Sync. version)
Set an analogue output channel. The output channel must be assigne

--- Page 86 | Keyword: DoPE ---
Page 86 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
If PC-Program terminates regularly by using Do PECloseLink command, EDC will reinitialise, and
DoPEOfflineActionBitOutput  command has no effect.
In: DoPEHdl DoPE link handle
OutputNo Number of analogue output channel
If closed loop control, Output  channel 0 cannot be selected!
M

--- Page 87 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 87 of 145DoPE
7.2 Bit I/O-Commands
These commands can be uses to read or write digital I/O’s. 
Reading digital inputs is normally  not necessary, since all configur ed inputs are automatically read
and transferred in the measuring data record.
General digital bit outputs are set 

--- Page 87 | Keyword: record ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 87 of 145DoPE
7.2 Bit I/O-Commands
These commands can be uses to read or write digital I/O’s. 
Reading digital inputs is normally  not necessary, since all configur ed inputs are automatically read
and transferred in the measuring data record.
General digital bit outputs are set with the comm and DoPESetB. You have to assign the outputs you
use in EDC set-up. Please refer to the document “D rive of Hardware-Modules of the EDC-Family” for
definition of output devices and bits.
For dedicated output bits, DoPE s upplies dedicated fun

--- Page 88 | Keyword: DoPE ---
Page 88 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
lpusTAN Pointer to Transaction-Number
Returns: Error constant (DoPERR_xxxx)
7.2.3 DoPEBeep(Sync)
DoPE_HANDLE DP
unsigned short Beep
WORD FAR                            *lpusTAN          (not for Sync. version)
Activate / deactivate beep on EDC.
In: DoPEHdl DoPE  link handle
Beep T

--- Page 89 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 89 of 145DoPE
In: DoPEHdl DoPE link handle
Output Bit 0 .. 15 represen t the digital outputs.
0x0000 will reset all bits, 0x000F will set bit 0 to 3,
0x000C will reset bit 0 and 1and set bit 2 and 3)
lpusTAN Pointer to Transaction-Number
Returns: Error constant (DoPERR_xxxx)
7.2.

--- Page 90 | Keyword: DoPE ---
Page 90 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
7.2.9 DoPEOfflineActionBitOutput (Sync)
DoPE_HANDLE DP
unsigned short BitOutputNo
unsigned short Mode
unsigned short Value
WORD FAR                            *lpusTAN          (not for Sync. version)
Definition of an action for an initialised digita l output device after ED C has

--- Page 91 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 91 of 145DoPE
7.3 Display Commands
7.3.1 DoPEDspClear(Sync)
DoPE_HANDLE DP
WORD FAR                            *lpusTAN          (not for Sync. version)
Clear LCD-display at EDC front panel
In: DoPEHdl DoPE link handle
lpusTAN Pointer to Transaction-Number
Returns: Error constant

--- Page 92 | Keyword: DoPE ---
Page 92 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
7.3.3 DoPEDspFKeys(Sync)
DoPE_HANDLE DP
char FAR *FKeys
WORD FAR                            *lpusTAN          (not for Sync. version)
Display function keys on LCD- display at EDC front panel
In: DoPEHdl DoPE link handle
FKeys Character string
lpusTAN Pointer to Transaction-Number


--- Page 93 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 93 of 145DoPE
7.3.6 DoPEDspBeam Value(Sync)
DoPE_HANDLE DP
short Value
WORD FAR                            *lpusTAN          (not for Sync. version)
Display beam on LCD-display at EDC front panel.
In: DoPEHdl DoPE link handle
Value Value of the beam in %
lpusTAN Pointer to Transa

--- Page 94 | Keyword: DoPE ---
Page 94 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
8 Movement commands
8.1 Halt commands
HALT is understood as a deceleration from current sp eed to speed zero. This is done by the build in
position generator. If not specified by the halt comm and default deceleration will be used. The final
destination position cannot be specifie

--- Page 95 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 95 of 145DoPE
WORD  FAR *lpusTAN
Halt movement of cross-head in the specified control mode. Default deceleration will be used.
After cross-head is halted, message will be transmitted. 
In: DoPEHdl DoPE link handle
MoveCtrl Control mode for halt 
(CTRL_POS, CTRL_LOAD or CTRL_EXTEN

--- Page 96 | Keyword: DoPE ---
Page 96 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
8.1.2 DoPEHalt_A(Sync)
DoPE_HANDLE DP
unsigned short MoveCtrl
double Dec
WORD  FAR *lpusTAN
Halt movement of cross-head in the specified co ntrol mode. Deceleration is a parameter of the
command. After cross-head is halted, message will be transmitted. 
In: DoPEHdl DoPE link handl

--- Page 97 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 97 of 145DoPE
8.1.4 DoPEHaltW_A(Sync)
DoPE_HANDLE DP
unsigned short MoveCtrl
double Dec
double Delay
WORD  FAR *lpusTAN
Halt movement of cross-head in the specified co ntrol mode. Deceleration is a parameter of the
command. After cross-head is halted and the sp ecified delay time

--- Page 98 | Keyword: DoPE ---
Page 98 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
8.2 Simple position commands
Simple positioning commands move e.g. in cross he ad position control to a new cross head position.
The Movement Control Type is equal to the destination type.
tCommand
position
Actual
position
AccelerationDeceleration
Constant s peedDestinations
F
∆l


--- Page 99 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 99 of 145DoPE
8.2.2 DoPEPos_A(Sync)
DoPE_HANDLE DP
unsigned short MoveCtrl
double Acc
double Speed
double Dec
double Destination
WORD  FAR *lpusTAN
Move cross-head in the specified control mode a nd speed to the given destination. Acceleration and
deceleration are parameters of t

--- Page 100 | Keyword: DoPE ---
Page 100 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
8.3 Approach of an external destination position
This commands move e.g. in cross-head position c ontrol to a certain load or extension (destination).
Control mode in not changed after reaching the destination. That is why it is not possible to position
exactly to the destination 

--- Page 101 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 101 of 145DoPE
8.3.2 DoPEPosG1_A(Sync)
DoPE_HANDLE DP
unsigned short MoveCtrl
double Acc
double Speed
double DecLimit
double Limit
double DecDest
unsigned short DestCtrl
double Destination
WORD  FAR *lpusTAN
Move cross-head in the specified control mode a nd speed to the given de

--- Page 102 | Keyword: DoPE ---
Page 102 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
8.3.3 DoPEPosD1(Sync)
DoPE_HANDLE DP
unsigned short MoveCtrl
double Speed
double Limit
unsigned short DestCtrl, 
double Destination
WORD  FAR *lpusTAN
Move cross-head in the specified control mode a nd speed to the given destination. Destination may
be different to move control. D

--- Page 103 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 103 of 145DoPE
8.3.4 DoPEPosD1_A(Sync)
DoPE_HANDLE DP
unsigned short MoveCtrl
double Acc
double Speed
double DecLimit
double Limit
double DecDest
unsigned short DestCtrl
double Destination
WORD  FAR *lpusTAN
Move cross-head in the specified control mode a nd speed to the given de

--- Page 104 | Keyword: DoPE ---
Page 104 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
8.4 Positioning to an external destination position
This commands move e.g. in cross-head position c ontrol to a certain load or extension (destination).
Control mode in changed in time to be able to  decelerate exactly to th e destination position. 
tCommand
position
“s”
Actual
p

--- Page 105 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 105 of 145DoPE
8.4.2 DoPEPosG2_A(Sync)
DoPE_HANDLE DP
unsigned short MoveCtrl
double Acc
double Speed
double DecLimit
double Limit
unsigned short DestCtrl
double DecDest
double Destination
WORD  FAR *lpusTAN
Move cross-head in the specified control mode a nd speed to the given de

--- Page 106 | Keyword: DoPE ---
Page 106 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
8.4.3 DoPEPosD2(Sync)
DoPE_HANDLE DP
unsigned short MoveCtrl
double Speed
double Limit
unsigned short DestCtrl
double Destination
WORD  FAR *lpusTAN
Move cross-head in the specified control mode a nd speed to the given destination. Destination may
be different to move control. Def

--- Page 107 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 107 of 145DoPE
8.4.4 DoPEPosD2_A(Sync)
DoPE_HANDLE DP
unsigned short MoveCtrl
double Acc
double Speed
double DecLimit
double Limit
unsigned short DestCtrl
double DecDest
double Destination
WORD  FAR *lpusTAN
Move cross-head in the specified control mode a nd speed to the given de

--- Page 108 | Keyword: DoPE ---
Page 108 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
8.5 General position command to a external destination position
This commands move e.g. in cross-head position c ontrol to a certain load or extension (destination).
At destination, three di fferent modes are possible:
1. DEST_APPROACH: Halt in ‘MoveCtrl’ after destination is reac

--- Page 109 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 109 of 145DoPE
8.5.1 DoPEPosExt(Sync)
DoPE_HANDLE DP
unsigned short MoveCtrl
double Speed
unsigned short LimitMode
double Limit
unsigned short DestinationCtrl
double Destination
unsigned short DestinationMode
WORD  FAR *lpusTAN
Move cross-head in the specified control mode  ‘Move

--- Page 110 | Keyword: DoPE ---
Page 110 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
8.5.2 DoPEPosExt_A(Sync)
DoPE_HANDLE DP
unsigned short MoveCtrl
double Acc
double Speed
double DecLimit
unsigned short LimitMode
double Limit
unsigned short DestinationCtrl
double DecDestination
double Destination
unsigned short DestinationMode
WORD  FAR *lpusTAN
Move cross-head i

--- Page 111 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 111 of 145DoPE
8.5.3 DoPEFMove(Sync)
DoPE_HANDLE DP
unsigned short Direction
unsigned short MoveCtrl
double Speed
WORD  FAR *lpusTAN
Move cross-head in the specified control mode  and speed UP or DOWN. As an implicit limit of
this command, softend's are used. 
In: DoPEHdl DoPE li

--- Page 112 | Keyword: DoPE ---
Page 112 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
8.6 Trigger
8.6.1 DoPETrig(Sync)
DoPE_HANDLE DP
unsigned short MoveCtrl
double Speed
double Limit
unsigned short TriggerCtrl
double Trigger
WORD  FAR *lpusTAN
Move cross-head with the specified speed to the limit position. Default acceleration and
deceleration will be used. If the

--- Page 113 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 113 of 145DoPE
8.6.2 DoPETrig_A(Sync)
DoPE_HANDLE DP
unsigned short MoveCtrl
double Acc
double Speed
double Dec
double Limit
unsigned short TriggerCtrl
double Trigger
WORD  FAR *lpusTAN
Move cross-head with the specified speed to th e limit position. Acceleration and deceleration

--- Page 114 | Keyword: DoPE ---
Page 114 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
8.7 Combined movement commands
8.7.1 DoPEStartCMD(Sync)
DoPE_HANDLE DP
unsigned long Cycles
unsigned short ModeFlags
WORD  FAR *lpusTAN
Start of a combined movement command. Up to  10 simple moving commands may be send after
this command to specify a complex moving sequence. 
In: 

--- Page 115 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 115 of 145DoPE
9 Complex moving commands
9.1 DoPEExt2Ctrl(Sync)
DoPE_HANDLE DP
unsigned short MoveCtrl
double OffsetCtrl
unsigned short SensorNo
double OffsetSensor
unsigned short Mode
double Scale
WORD  FAR *lpusTAN
Move cross-head according to an external co mmand signal. You m

--- Page 116 | Keyword: DoPE ---
Page 116 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
9.2  DoPEFDPoti(Sync)
DoPE_HANDLE DP
unsigned short MoveCtrl
double MaxSpeed
unsigned short SensorNo
unsigned short DxTrigger
unsigned short Mode
double Scale
WORD  FAR *lpusTAN
Move cross-head according to an external command signal generated by a digital encoder
(DigiPoti). This

--- Page 117 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 117 of 145DoPE
9.3 DoPECycle(Sync)
s,F,dl
tDest2
Dest1
DestinationSpeed1
Speed2 Halt1Halt2
Speed
DoPE_HANDLE DP
unsigned short MoveCtrl
double Speed1
double Dest1
double Halt1
double Speed2
double Dest2
double Halt2
unsigned long Cycles
double Speed
double Destination
WORD  FAR *

--- Page 118 | Keyword: DoPE ---
Page 118 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
9.4 DoPECosine(Sync)
s,F,dl
tDest1
Dest2
Dest inati onSpeed1
Speed
DoPE_HANDLE DP
unsigned short MoveCtrl
double Speed1
double Dest1
double Dest2
double Frequency
unsigned long HalfCycles
double Speed
double Destination
WORD  FAR *lpusTAN
Cosine movement. 
In: DoPEHdl DoPE link ha

--- Page 119 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 119 of 145DoPE
9.5 DoPECosineX(Sync)
DoPE_HANDLE DP
unsigned short MoveCtrl
double Speed1
double Dest1
double Halt1
double Dest2
double Halt2
double Frequency
unsigned long HalfCycles
double Speed
double Destination
WORD  FAR *lpusTAN
Extended version of Cosine movement.
With thi

--- Page 120 | Keyword: DoPE ---
Page 120 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
COS_PCT_AUTO1 Automatic peak value control with  Start values.
Pilot control is activated with the peak values (Destination 1
and 2). After xx cycles peak values will be automaticallycontrolled.
COS_PCT_AUTO2 Automatic peak value control without  Start offset.
Every xx cycles peak

--- Page 121 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 121 of 145DoPE
9.7 DoPETriangle(Sync)
s,F,dl
tDest2
Dest1
D estinationSpeed1Speed
DoPE_HANDLE DP
unsigned short MoveCtrl
double Speed1
double Dest1
double Dest2
double Frequency
unsigned long HalfCycles
double Speed
double Destination
WORD  FAR *lpusTAN
Triangular cyclic movement

--- Page 122 | Keyword: DoPE ---
Page 122 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
9.8 DoPERectangle(Sync)
s,F,dl
tDest2
Dest1
DestinationSpeed1Speed
DoPE_HANDLE DP
unsigned short MoveCtrl
double Speed1
double Dest1
double Dest2
double Frequency
unsigned long HalfCycles
double Speed
double Destination
WORD  FAR *lpusTAN
Rectangular cyclic movement. 
In: DoPEHdl 

--- Page 123 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 123 of 145DoPE
9.9 DoPEOffsC(Sync)
DoPE_HANDLE DP
double Speed
double PosDiff
WORD  FAR *lpusTAN
Special moving command to measure the offset of  an external, analogue speed controller. This
offset will be used for the speed output signal and compensates the offset of the externa

--- Page 124 | Keyword: DoPE ---
Page 124 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
10 Synchronized movement
There are two commands to control synchronized  movement of two or more EDC120 systems.
This commands are only useful if the synchroni zation option is installed, and the two or more
EDC120 are correctly connected.
With the first command, you can synchroni

--- Page 125 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 125 of 145DoPE
WORD FAR                            *lpusTAN          (not for Sync. version)
Set or discard the delay time for synchronized  movement commands, or the system time for
synchronized systems. (only EDC60/120)
If Mode is SSM_SYNCMOVE, the next moving command like DoPE

--- Page 126 | Keyword: DoPE ---
Page 126 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
Error = DoPECosine  ( DoPEHdl_2, CTRL_POS, Speed1, Dest1, Dest2, Frequency, HalfCycles, Speed,
                      Destination, &lpusTAN_2);
/* Start synchronization at Master EDC120 */
Error = DoPESynchronizeSystemStart (DoPEHdl_1, &lpusTAN_1);
10.2 DoPESynchronizeSystemStart (

--- Page 127 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 127 of 145DoPE
11 Miscellaneous Control Commands
11.1 DoPEOn(Sync)
DoPE_HANDLE DP
WORD FAR                            *lpusTAN          (not for Sync. version)
Activate drive (only for EDC5/25 and EDC60/120). On EDC100 systems the drive is activated by
the "ON" push button at the

--- Page 128 | Keyword: DoPE ---
Page 128 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
11.4 DoPEStop(Sync)
DoPE_HANDLE DP
unsigned short State
WORD  FAR *lpusTAN
Activate / deactivate stop state. 
In: DoPEHdl DoPE link handle
Status TRUE:  stop state (reset drive enable)
FALSE: free state (set drive enable) 
lpusTAN Pointer to Transaction-Number
Returns: Error const

--- Page 129 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 129 of 145DoPE
11.7 DoPESetOpenLoopCommand(Sync)
DoPE_HANDLE DP
double Command
WORD FAR                            *lpusTAN          (not for Sync. version)
Set output value to valve. This command is only allowed in OpenLoop contro ller structure. It is
used for hydraulic machine

--- Page 129 | Keyword: structure ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 129 of 145DoPE
11.7 DoPESetOpenLoopCommand(Sync)
DoPE_HANDLE DP
double Command
WORD FAR                            *lpusTAN          (not for Sync. version)
Set output value to valve. This command is only allowed in OpenLoop contro ller structure. It is
used for hydraulic machines, that operate without  a position sensor. (typi cally concrete testing
machines) With this command it is possible to move the piston up or down. The command valuewhere the piston is floating (not  moving up or down) must be determined during installation.

--- Page 129 | Keyword: struct ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 129 of 145DoPE
11.7 DoPESetOpenLoopCommand(Sync)
DoPE_HANDLE DP
double Command
WORD FAR                            *lpusTAN          (not for Sync. version)
Set output value to valve. This command is only allowed in OpenLoop contro ller structure. It is
used for hydraulic machines, that operate without  a position sensor. (typi cally concrete testing
machines) With this command it is possible to move the piston up or down. The command valuewhere the piston is floating (not  moving up or down) must be determined during installation.

--- Page 130 | Keyword: DoPE ---
Page 130 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
12 Sensor EEPROM Handling
Following functions support read a nd write of sensor-EEPROM data.
ATTENTION: Use this functions very carefully.
DoPE cannot check the tota l integrity of the data!
UserScale has no effect on the Sensor EEPROM data!
These function work on initialised and 

--- Page 130 | Keyword: structure ---
nsorHeaderData.Class =SEN_A NALOGUE use DoPERdSensorAnalogueData,
for DoPESensorHeaderData.Class =S EN_INC use DoPERdSensorIncData,
for DoPESensorHeaderData.Class =SEN_ABS use DoPERdSensorAbsDatato read the sensor class specific data.
4. Modify data.Only the 
bold type  parameter in the sensor data structures are allowed to be changed!
5. Use DoPERdSensorConKey in a loop (not fast er than 100 ms) and wait until the KeyPressed
parameter is 1.
6. Use the appropriate write function to st ore the data into the sensor EEPROM.
It is not absolutely necessary to use the functi on DoPERdSensorConKey be

--- Page 130 | Keyword: struct ---
nsorHeaderData.Class =SEN_A NALOGUE use DoPERdSensorAnalogueData,
for DoPESensorHeaderData.Class =S EN_INC use DoPERdSensorIncData,
for DoPESensorHeaderData.Class =SEN_ABS use DoPERdSensorAbsDatato read the sensor class specific data.
4. Modify data.Only the 
bold type  parameter in the sensor data structures are allowed to be changed!
5. Use DoPERdSensorConKey in a loop (not fast er than 100 ms) and wait until the KeyPressed
parameter is 1.
6. Use the appropriate write function to st ore the data into the sensor EEPROM.
It is not absolutely necessary to use the functi on DoPERdSensorConKey be

--- Page 131 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 131 of 145DoPE
12.2 DoPERdSensorHeaderData
DoPE_HANDLE DoPEHdl
WORD Connector
DoPESensorHeaderData *SenHdrData
Read sensor EEPROM data header.
In: DoPEHdl DoPE link handle
Connector Connector number of sensor
*SenHdrData Pointer to sens or data header structure
Returns: Error con

--- Page 131 | Keyword: structure ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 131 of 145DoPE
12.2 DoPERdSensorHeaderData
DoPE_HANDLE DoPEHdl
WORD Connector
DoPESensorHeaderData *SenHdrData
Read sensor EEPROM data header.
In: DoPEHdl DoPE link handle
Connector Connector number of sensor
*SenHdrData Pointer to sens or data header structure
Returns: Error constant (DoPERR_xxxx)
DoPESensorHeaderData structure:
typedef struct                         /* Sensor EEPROM header data          */
{                                      /* ---------------------------------- */
  WORD   PartNo;                       /* Part indent number

--- Page 131 | Keyword: struct ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 131 of 145DoPE
12.2 DoPERdSensorHeaderData
DoPE_HANDLE DoPEHdl
WORD Connector
DoPESensorHeaderData *SenHdrData
Read sensor EEPROM data header.
In: DoPEHdl DoPE link handle
Connector Connector number of sensor
*SenHdrData Pointer to sens or data header structure
Returns: Error constant (DoPERR_xxxx)
DoPESensorHeaderData structure:
typedef struct                         /* Sensor EEPROM header data          */
{                                      /* ---------------------------------- */
  WORD   PartNo;                       /* Part indent number

--- Page 131 | Keyword: typedef ---
HeaderData
DoPE_HANDLE DoPEHdl
WORD Connector
DoPESensorHeaderData *SenHdrData
Read sensor EEPROM data header.
In: DoPEHdl DoPE link handle
Connector Connector number of sensor
*SenHdrData Pointer to sens or data header structure
Returns: Error constant (DoPERR_xxxx)
DoPESensorHeaderData structure:
typedef struct                         /* Sensor EEPROM header data          */
{                                      /* ---------------------------------- */
  WORD   PartNo;                       /* Part indent number             [No]*/
  BYTE   Version;                      /* Part revision     

--- Page 132 | Keyword: DoPE ---
Page 132 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
12.3 DoPERdSensorAnalogueData
DoPE_HANDLE DoPEHdl
WORD Connector
DoPESensorAnalogueData *SenAnalogueData
Read analogue sensor data.
In: DoPEHdl DoPE link handle
Connector Connector number of sensor
*SenAnalogueData Pointer to analogue sensor data structure
Returns: Error constant 

--- Page 132 | Keyword: structure ---
 132 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
12.3 DoPERdSensorAnalogueData
DoPE_HANDLE DoPEHdl
WORD Connector
DoPESensorAnalogueData *SenAnalogueData
Read analogue sensor data.
In: DoPEHdl DoPE link handle
Connector Connector number of sensor
*SenAnalogueData Pointer to analogue sensor data structure
Returns: Error constant (DoPERR_xxxx)
12.4 DoPEWrSensorAnalogueData
DoPE_HANDLE DoPEHdl
WORD Connector
DoPESensorAnalogueData *SenAnalogueData
Write analogue sensor data.
In: DoPEHdl DoPE link handle
Connector Connector number of sensor
*SenAnalogueData Pointer to analogue sensor data stru

--- Page 132 | Keyword: struct ---
 132 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
12.3 DoPERdSensorAnalogueData
DoPE_HANDLE DoPEHdl
WORD Connector
DoPESensorAnalogueData *SenAnalogueData
Read analogue sensor data.
In: DoPEHdl DoPE link handle
Connector Connector number of sensor
*SenAnalogueData Pointer to analogue sensor data structure
Returns: Error constant (DoPERR_xxxx)
12.4 DoPEWrSensorAnalogueData
DoPE_HANDLE DoPEHdl
WORD Connector
DoPESensorAnalogueData *SenAnalogueData
Write analogue sensor data.
In: DoPEHdl DoPE link handle
Connector Connector number of sensor
*SenAnalogueData Pointer to analogue sensor data stru

--- Page 132 | Keyword: typedef ---
DoPE_HANDLE DoPEHdl
WORD Connector
DoPESensorAnalogueData *SenAnalogueData
Write analogue sensor data.
In: DoPEHdl DoPE link handle
Connector Connector number of sensor
*SenAnalogueData Pointer to analogue sensor data structure
Returns: Error constant (DoPERR_xxxx)
DoPESensorAnalogueData structure:
typedef struct                         /* Analogue sensor EEPROM data        */
{                                      /* ---------------------------------- */
  float  MaxExcitation;                /* Maximum excitation voltage      [V]*/
  WORD   MinImpedance;                 /* Impedance         

--- Page 133 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 133 of 145DoPE
12.5 DoPERdSensorIncData
DoPE_HANDLE DoPEHdl
WORD Connector
DoPESensorIncData * SenIncData
Read incremental sensor data.
In: DoPEHdl DoPE link handle
Connector Connector number of sensor
*SenIncData Pointer to incremental sensor data structure
Returns: Error consta

--- Page 133 | Keyword: structure ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 133 of 145DoPE
12.5 DoPERdSensorIncData
DoPE_HANDLE DoPEHdl
WORD Connector
DoPESensorIncData * SenIncData
Read incremental sensor data.
In: DoPEHdl DoPE link handle
Connector Connector number of sensor
*SenIncData Pointer to incremental sensor data structure
Returns: Error constant (DoPERR_xxxx)
12.6 DoPEWrSensorIncData
DoPE_HANDLE DoPEHdl
WORD Connector
DoPESensorIncData *SenIncData
Write incremental sensor data.
In: DoPEHdl DoPE link handle
Connector Connector number of sensor
*SenIncData Pointer to incremental sensor data structure
Returns:

--- Page 133 | Keyword: struct ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 133 of 145DoPE
12.5 DoPERdSensorIncData
DoPE_HANDLE DoPEHdl
WORD Connector
DoPESensorIncData * SenIncData
Read incremental sensor data.
In: DoPEHdl DoPE link handle
Connector Connector number of sensor
*SenIncData Pointer to incremental sensor data structure
Returns: Error constant (DoPERR_xxxx)
12.6 DoPEWrSensorIncData
DoPE_HANDLE DoPEHdl
WORD Connector
DoPESensorIncData *SenIncData
Write incremental sensor data.
In: DoPEHdl DoPE link handle
Connector Connector number of sensor
*SenIncData Pointer to incremental sensor data structure
Returns:

--- Page 133 | Keyword: typedef ---
SensorIncData
DoPE_HANDLE DoPEHdl
WORD Connector
DoPESensorIncData *SenIncData
Write incremental sensor data.
In: DoPEHdl DoPE link handle
Connector Connector number of sensor
*SenIncData Pointer to incremental sensor data structure
Returns: Error constant (DoPERR_xxxx)
DoPESensorIncData structure:
typedef struct                         /* Incremental sensor EEPROM data     */
{                                      /* ---------------------------------- */
  float  Voltage1;                     /* Supply voltage 1                [V]*/
  float  Voltage2;                     /* Supply voltage 2  

--- Page 134 | Keyword: DoPE ---
Page 134 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
12.7 DoPERdSensorAbsData
DoPE_HANDLE DoPEHdl
WORD Connector
DoPESensorAbsData *SenAbsData
Read absolute sensor data.
In: DoPEHdl DoPE link handle
Connector Connector number of sensor
*SenAbsData Pointer to absolute  value sensor data structure
Returns: Error constant (DoPERR_xxxx)

--- Page 134 | Keyword: structure ---
Page 134 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
12.7 DoPERdSensorAbsData
DoPE_HANDLE DoPEHdl
WORD Connector
DoPESensorAbsData *SenAbsData
Read absolute sensor data.
In: DoPEHdl DoPE link handle
Connector Connector number of sensor
*SenAbsData Pointer to absolute  value sensor data structure
Returns: Error constant (DoPERR_xxxx)
12.8 DoPEWrSensorAbsData
DoPE_HANDLE DoPEHdl
WORD Connector
DoPESensorAbsData *SenAbsData
Write absolute sensor data.
In: DoPEHdl DoPE link handle
Connector Connector number of sensor
*SenAbsData Pointer to absolute  value sensor data structure
Returns

--- Page 134 | Keyword: struct ---
Page 134 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
12.7 DoPERdSensorAbsData
DoPE_HANDLE DoPEHdl
WORD Connector
DoPESensorAbsData *SenAbsData
Read absolute sensor data.
In: DoPEHdl DoPE link handle
Connector Connector number of sensor
*SenAbsData Pointer to absolute  value sensor data structure
Returns: Error constant (DoPERR_xxxx)
12.8 DoPEWrSensorAbsData
DoPE_HANDLE DoPEHdl
WORD Connector
DoPESensorAbsData *SenAbsData
Write absolute sensor data.
In: DoPEHdl DoPE link handle
Connector Connector number of sensor
*SenAbsData Pointer to absolute  value sensor data structure
Returns

--- Page 134 | Keyword: typedef ---
ensorAbsData
DoPE_HANDLE DoPEHdl
WORD Connector
DoPESensorAbsData *SenAbsData
Write absolute sensor data.
In: DoPEHdl DoPE link handle
Connector Connector number of sensor
*SenAbsData Pointer to absolute  value sensor data structure
Returns: Error constant (DoPERR_xxxx)
DoPESensorAbsData structure:
typedef struct                         /* Absolute value EEPROM header data  */
{                                      /* ---------------------------------- */
  float  Voltage1;                     /* Supply voltage 1                [V]*/
  float  Voltage2;                     /* Supply voltage 2  

--- Page 135 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 135 of 145DoPE
13 Default measuring dada record
unsigned long Cycles Cycle counter
double Time Time from subsystem
double Position X-Head position
double Load Load 
double Extension Extension
double SensorD DigiPoti
double Sensor4 Sensor 4 measuring channel
double Sensor5 Sensor 

--- Page 135 | Keyword: record ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 135 of 145DoPE
13 Default measuring dada record
unsigned long Cycles Cycle counter
double Time Time from subsystem
double Position X-Head position
double Load Load 
double Extension Extension
double SensorD DigiPoti
double Sensor4 Sensor 4 measuring channel
double Sensor5 Sensor 5 measuring channel
double Sensor6 Sensor 6 measuring channel

--- Page 136 | Keyword: DoPE ---
Page 136 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
13.1 Logical input signals
The logical input signals are safety  relevant digital inputs. They ar e configured duri ng initialisation
and one logical input signal may map to more than  one digital input. The state of the logical input
signals is maintained in the measuring dada re

--- Page 136 | Keyword: record ---
C\DoPE\DOPE.DOC)DoPE
13.1 Logical input signals
The logical input signals are safety  relevant digital inputs. They ar e configured duri ng initialisation
and one logical input signal may map to more than  one digital input. The state of the logical input
signals is maintained in the measuring dada record.
15-10  6  5  4  3  2  1  0  
Emergency Stop
Upper Limit Switch
Lower Limit Switch
Drive not Ready
Internal useS-Halt
Shield test modeEmergency Stop, driving free possible7  
8  9  
Reference switch at X-Head
Shield LockedShield Closed
Reserve10  
Emergency stop (IN_SIG_EMERGENCY_STOP):
If th

--- Page 137 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 137 of 145DoPE
13.2 Logical output signals
The logical output signals are digita l outputs to control the drive a nd associated devices. They are
configured during initialisation. The state of the logical output signals is maintained in the measuring
dada record.
15  14  13  12  

--- Page 137 | Keyword: record ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 137 of 145DoPE
13.2 Logical output signals
The logical output signals are digita l outputs to control the drive a nd associated devices. They are
configured during initialisation. The state of the logical output signals is maintained in the measuring
dada record.
15  14  13  12  11  10  9  8  7  6  5  4  3  2  1  0  
Internal Drive enableSoftware ready
Drive enable
Brake release
Emergency movement
Bypass
MC-Limit reachedLock Screen
OnRelay
Direction Output
reserved
reservedreservedreservedreservedreserved
Drive ON (O_SIG_DRIVE_ON):
Being in the inact

--- Page 138 | Keyword: DoPE ---
Page 138 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
13.3 Controller status WORD 1
15  14  13  12  11  10  9  8  7  6  5  4  3  2  1  0  
CTRL_FREECTRL_STATE_POS
CTRL_STATE_LOAD
CTRL_STATE_EXT
reserved
CTRL_HALT
CTRL_DOWNCTRL_UP
CTRL_MOVE (not halted)
CTRL_READY
CTRL_INIT_E
CTRL_SFTSET
reserved
SYNCH_STATEMASTER/SLAVE
CTRL_E_ACTIVE


--- Page 138 | Keyword: struct ---
 generator moves up (in S/F/E).
CTRL_MOVE:
This bit is always set when the cross-head is not securely halted. The bit is not set with a
switched off machine and with S controlled hold ing of a position. In all other cases the bit
is set. 
CTRL_READY:
The bit is set, when the EDC accepts movement  instructions from the DoPE. It is also
particularly set, when the EDC is in the drive ready state, waiting for the start of the drive
through the first movement instruction. 
CTRL_FREE:
The EDC waits for the drive enable through the Host software or from the user.

--- Page 139 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 139 of 145DoPE
CTRL_INIT_E:
The EDC awaits the initiation of an emergency movement through the Host.
CTRL_SFTSET:
Change of softends allowed.
CTRL_E_ACTIVE:
Emergency movement is active.
13.4 Controller status WORD 2
15  14  13  12  11  10  9  8  7  6  5  4  3  2  1  0  
reserved

--- Page 140 | Keyword: DoPE ---
Page 140 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
13.5 Definitions of EDC-front panel keys
The EDC-front panel keys are coded and transmitted in DoPE data record within three WORD's.
One WORD represents the active state of the keys, one WORD all new keys and one WORD all gone
keys. The "0"-"9", "F1" - "F3", "." and "± " keys are 

--- Page 140 | Keyword: record ---
Page 140 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
13.5 Definitions of EDC-front panel keys
The EDC-front panel keys are coded and transmitted in DoPE data record within three WORD's.
One WORD represents the active state of the keys, one WORD all new keys and one WORD all gone
keys. The "0"-"9", "F1" - "F3", "." and "± " keys are coded in the low BYTE in ASCII.
The "Up", "Down", "Halt" and "Dig iPoti" keys are represented as  single bits in the upper B

--- Page 141 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 141 of 145DoPE
14 DoPE Error constants
DoPERR_NOERROR (0) No error
DoPERR_NOFLOAT (1) No float in WIN16 callback
DoPERR_SYNC (2) Synchronization to callback     failed
DoPERR_TIMEOUT (3) Timeout at await answer
DoPERR_NOFNC (4) Function not implemented
DoPERR_VERSION (5) No compa

--- Page 141 | Keyword: structure ---
itialised
DoPERR_CMD_DIR (1007) Movement direction not possible
DoPERR_CMD_TMP (1008) Required resource not available
DoPERR_CMD_RUNTIME (1009) Run time error active
DoPERR_CMD_INTERN (1010) Internal error in subsystem
DoPERR_CMD_MEM (1011) Insufficient memory
DoPERR_CMD_CST (1012) Wrong controller Structure
DoPERR_CMD_MSGNO (2001) Unknown message number
DoPERR_CMD_VERSION (2003) Wrong PE interface version
DoPERR_CMD_OPEN (2004) Set-up not opened
DoPERR_CMD_MEMORY (2005) Not enough memory
Machine normalisation errors
DoPERR_PARMS (0x4001) Parameter Error 
DoPERR_ZERODIV (0x4002) Division by ZE

--- Page 141 | Keyword: struct ---
itialised
DoPERR_CMD_DIR (1007) Movement direction not possible
DoPERR_CMD_TMP (1008) Required resource not available
DoPERR_CMD_RUNTIME (1009) Run time error active
DoPERR_CMD_INTERN (1010) Internal error in subsystem
DoPERR_CMD_MEM (1011) Insufficient memory
DoPERR_CMD_CST (1012) Wrong controller Structure
DoPERR_CMD_MSGNO (2001) Unknown message number
DoPERR_CMD_VERSION (2003) Wrong PE interface version
DoPERR_CMD_OPEN (2004) Set-up not opened
DoPERR_CMD_MEMORY (2005) Not enough memory
Machine normalisation errors
DoPERR_PARMS (0x4001) Parameter Error 
DoPERR_ZERODIV (0x4002) Division by ZE

--- Page 142 | Keyword: DoPESetup ---
hineType' removed
• New parameters in struct DoPEVersion: 'PeInterfacePC', 'DpxVer'.
• Struct DoPEDPotiDef and function DoPERdDPotiDef () deleted. The digipoti has to be handled as
normal sensor. Valid parameters are: 'Connector', 'Sign', Offset', 'Scale'.
• New struct DoPEGeneralData.
• New struct DoPESetup.
• New constants for 'Mode' in DoPECosineV.
• New constants for 'CtrlState2': CT RL_UPPER_LIMIT, CTRL_LOWER_LIMIT,
• CTRL_CALIBRATION'
• Constants for 'McState' removed.
• New interface function DoPEWrSensorDef, Do PEWrCtrlSensorDef, DoPEWrOutChannelDef,
DoPEWrBitOutDef, DoPEWrBitInDef and

--- Page 142 | Keyword: DoPE ---
Page 142 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
15 Changes Version 1 Æ 2
• New sensor unit UNIT_INC_RE V [Increments/Revolution].
• 16 measuring channels. New 'SEN SOR_xx', 'MCBIT _xx' constants.
• 16 analogue output channels . New 'OUT_xx' constants.
• 10 channel supervisions.
• New 'BIN_xx' 'BOU T_xx' constants.
• Changed 'MA

--- Page 142 | Keyword: struct ---
nnels. New 'SEN SOR_xx', 'MCBIT _xx' constants.
• 16 analogue output channels . New 'OUT_xx' constants.
• 10 channel supervisions.
• New 'BIN_xx' 'BOU T_xx' constants.
• Changed 'MAX_MC', 'MAX_OC' constants.
• New constant 'SENSOR_D' for digipo ti (old digipoti was 'SENSOR_O7').
• New parameters in struct DoPESenDef: 'CtrlChannel', 'UseEeprom', Correction'.
• New parameters in struct DoPECtrlSenDef: 'Pos Td', 'PosGenTd', 'SpeedTd', 'SpeedGenTd' and
'AccK'.
• 'UpperSoftLimit', 'LowerSoftLimit'  and 'SoftLimitReaction' removed.
• New type double in struct DoPEOutChaDef for 'MaxValue','MinValue',

--- Page 143 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 143 of 145DoPE
• New error code DoPERR_SETUPOPEN
• New command error codes DoPERR_CMD_...
• New command ErrorNumber definitions CMD_ERROR_...
• New connector constants.
• DoPECtrl... K/Ti parameters change d from double to unsigned long/short
• New default measuring dada record:


--- Page 143 | Keyword: struct ---
da record:
• New SysStateN and additional measuri ng channels and bit input devices.
• OutChanN, BitOutN, McState, McCal, Fata lError, ErrorLevel and CtrlState removed.
• McOption1..11 renamed to SensorD, Sensor4..15
• New Events DoPEEVT_DATAOVERFLOW , DoPEEVT_ACK, DoPEEVT_NAK and
DoPEEVT_ALL
• New struct DoPECommandError and DoPEEPError definitions
• Application version string in DoPEVersi on struct changed to 13 char length.
• DoPEOffsK renamed to DoPEOffsC
• Definitions CHK_BELOW and CHK_ABOVE corrected
• New typedefinitions for messages not fitting the DoPEMCM sctructure: DoPESftM for 'Sof

--- Page 143 | Keyword: record ---
(P:\DOC\DoPE\DOPE.DOC) Page 143 of 145DoPE
• New error code DoPERR_SETUPOPEN
• New command error codes DoPERR_CMD_...
• New command ErrorNumber definitions CMD_ERROR_...
• New connector constants.
• DoPECtrl... K/Ti parameters change d from double to unsigned long/short
• New default measuring dada record:
• New SysStateN and additional measuri ng channels and bit input devices.
• OutChanN, BitOutN, McState, McCal, Fata lError, ErrorLevel and CtrlState removed.
• McOption1..11 renamed to SensorD, Sensor4..15
• New Events DoPEEVT_DATAOVERFLOW , DoPEEVT_ACK, DoPEEVT_NAK and
DoPEEVT_ALL
• New str

--- Page 143 | Keyword: typedef ---
 New Events DoPEEVT_DATAOVERFLOW , DoPEEVT_ACK, DoPEEVT_NAK and
DoPEEVT_ALL
• New struct DoPECommandError and DoPEEPError definitions
• Application version string in DoPEVersi on struct changed to 13 char length.
• DoPEOffsK renamed to DoPEOffsC
• Definitions CHK_BELOW and CHK_ABOVE corrected
• New typedefinitions for messages not fitting the DoPEMCM sctructure: DoPESftM for 'Softend'
Message
• DoPEOffsCM for 'Offset-Correction' Message
• DoPECheckM for 'Measuring Channel Supervision' Message

--- Page 144 | Keyword: DoPE ---
Page 144 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
16 Important Changes to Version 2.21, 2.22
New function DoPEOpenLink replaces th e old function DoPEOpenConnection.
New function DoPECloseLink replaces the old function DoPECloseConnection.
It is necessary to recompile the applicatio n program before using this DoPE version.
New m

--- Page 144 | Keyword: DoPEOpenLink ---
Page 144 of 145 Version 2.24  (P:\DOC\DoPE\DOPE.DOC)DoPE
16 Important Changes to Version 2.21, 2.22
New function DoPEOpenLink replaces th e old function DoPEOpenConnection.
New function DoPECloseLink replaces the old function DoPECloseConnection.
It is necessary to recompile the applicatio n program before using this DoPE version.
New moving command DoPEPosExt (Sync) and DoPEPosExt_A(Sync)

--- Page 145 | Keyword: DoPE ---
Version 2.24  (P:\DOC\DoPE\DOPE.DOC) Page 145 of 145DoPE
17 Important Changes to Version 2.23, 2.24
• WIN16 support removed
• New constant definitions for 'MsgId ' in MOVE_CTRL_MSG: CMSG_SHIELD_ERR
• Support of serial Sensors
• New connector definitions CON_X 62A, CON_X62B, CON_X62C, CON_X62D
• DoPEWrSensorMsg(Sync)
• Ne

